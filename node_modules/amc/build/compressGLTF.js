module.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=47)}([function(t,e){t.exports=require("path")},function(t,e,r){var n=r(7),i=r(50),o=r(52),s=[],c=r(53);var a,u,f=function(){};function l(t){i(t),t.gracefulify=l,t.FileReadStream=p,t.FileWriteStream=y,t.createReadStream=function(t,e){return new p(t,e)},t.createWriteStream=function(t,e){return new y(t,e)};var e=t.readFile;t.readFile=function(t,r,n){"function"==typeof r&&(n=r,r=null);return function t(r,n,i){return e(r,n,function(e){!e||"EMFILE"!==e.code&&"ENFILE"!==e.code?("function"==typeof i&&i.apply(this,arguments),d()):h([t,[r,n,i]])})}(t,r,n)};var r=t.writeFile;t.writeFile=function(t,e,n,i){"function"==typeof n&&(i=n,n=null);return function t(e,n,i,o){return r(e,n,i,function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?("function"==typeof o&&o.apply(this,arguments),d()):h([t,[e,n,i,o]])})}(t,e,n,i)};var n=t.appendFile;n&&(t.appendFile=function(t,e,r,i){"function"==typeof r&&(i=r,r=null);return function t(e,r,i,o){return n(e,r,i,function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?("function"==typeof o&&o.apply(this,arguments),d()):h([t,[e,r,i,o]])})}(t,e,r,i)});var s=t.readdir;function c(e){return s.apply(t,e)}if(t.readdir=function(t,e,r){var n=[t];"function"!=typeof e?n.push(e):r=e;return n.push(function(t,e){e&&e.sort&&e.sort();!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?("function"==typeof r&&r.apply(this,arguments),d()):h([c,[n]])}),c(n)},"v0.8"===process.version.substr(0,4)){var a=o(t);p=a.ReadStream,y=a.WriteStream}var u=t.ReadStream;p.prototype=Object.create(u.prototype),p.prototype.open=function(){var t=this;b(t.path,t.flags,t.mode,function(e,r){e?(t.autoClose&&t.destroy(),t.emit("error",e)):(t.fd=r,t.emit("open",r),t.read())})};var f=t.WriteStream;function p(t,e){return this instanceof p?(u.apply(this,arguments),this):p.apply(Object.create(p.prototype),arguments)}function y(t,e){return this instanceof y?(f.apply(this,arguments),this):y.apply(Object.create(y.prototype),arguments)}y.prototype=Object.create(f.prototype),y.prototype.open=function(){var t=this;b(t.path,t.flags,t.mode,function(e,r){e?(t.destroy(),t.emit("error",e)):(t.fd=r,t.emit("open",r))})},t.ReadStream=p,t.WriteStream=y;var m=t.open;function b(t,e,r,n){return"function"==typeof r&&(n=r,r=null),function t(e,r,n,i){return m(e,r,n,function(o,s){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?("function"==typeof i&&i.apply(this,arguments),d()):h([t,[e,r,n,i]])})}(t,e,r,n)}return t.open=b,t}function h(t){f("ENQUEUE",t[0].name,t[1]),s.push(t)}function d(){var t=s.shift();t&&(f("RETRY",t[0].name,t[1]),t[0].apply(null,t[1]))}c.debuglog?f=c.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(f=function(){var t=c.format.apply(c,arguments);t="GFS4: "+t.split(/\n/).join("\nGFS4: "),console.error(t)}),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){f(s),r(21).equal(s.length,0)}),t.exports=l(r(20)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&(t.exports=l(n)),t.exports.close=n.close=(a=n.close,function(t,e){return a.call(n,t,function(t){t||d(),"function"==typeof e&&e.apply(this,arguments)})}),t.exports.closeSync=n.closeSync=(u=n.closeSync,function(t){var e=u.apply(n,arguments);return d(),e})},function(t,e,r){"use strict";e.fromCallback=function(t){return Object.defineProperty(function(){if("function"!=typeof arguments[arguments.length-1])return new Promise((e,r)=>{arguments[arguments.length]=(t,n)=>{if(t)return r(t);e(n)},arguments.length++,t.apply(this,arguments)});t.apply(this,arguments)},"name",{value:t.name})},e.fromPromise=function(t){return Object.defineProperty(function(){const e=arguments[arguments.length-1];if("function"!=typeof e)return t.apply(this,arguments);t.apply(this,arguments).then(t=>e(null,t),e)},"name",{value:t.name})}},function(t,e,r){"use strict";const n=(0,r(2).fromCallback)(r(55)),i=r(56);t.exports={mkdirs:n,mkdirsSync:i,mkdirp:n,mkdirpSync:i,ensureDir:n,ensureDirSync:i}},function(t,e,r){"use strict";const n=r(2).fromPromise,i=r(19);t.exports={pathExists:n(function(t){return i.access(t).then(()=>!0).catch(()=>!1)}),pathExistsSync:i.existsSync}},,function(t,e,r){const n=r(28),i={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR",COLOR_0:"COLOR",COLOR_1:"COLOR_1",TEXCOORD:"TEXCOORD",TEXCOORD_0:"TEXCOORD",TEXCOORD_1:"TEXCOORD_1",TEXCOORD_2:"TEXCOORD_2",TANGENT:"TANGENT",JOINT:"JOINT",JOINTS_0:"JOINT",WEIGHT:"WEIGHT",WEIGHTS_0:"WEIGHT"},o=["POSITION","NORMAL","COLOR","TEXCOORD","TANGENT","JOINT","WEIGHT","OTHER","TEXCOORD_1","TEXCOORD_2","COLOR_1"],s={POSITION:0,NORMAL:1,COLOR:2,TEXCOORD:3,TANGENT:4,JOINT:5,WEIGHT:6,OTHER:7,TEXCOORD_1:8,TEXCOORD_2:9,COLOR_1:10},c={POSITION:"vertices",NORMAL:"normals",COLOR:"colors",TEXCOORD:"uvs",TEXCOORD_1:"uvs1",TEXCOORD_2:"uvs2",TANGENT:"tangents",JOINT:"skinIndices",WEIGHT:"skinWeights"},a={vertices:"POSITION",_normals:"NORMAL",colors:"COLOR",uvs:"TEXCOORD",uvs1:"TEXCOORD_1",uvs2:"TEXCOORD_2",_tangents:"TANGENT",skinIndices:"JOINT",skinWeights:"WEIGHT"},u={POSITION:3,NORMAL:3,COLOR:3,COLOR_1:3,TEXCOORD:2,TEXCOORD_1:2,TEXCOORD_2:2,TANGENT:4,JOINT:4,WEIGHT:4};class f{static get ATTR(){return i}static get ATTR_NAME_ID(){return s}static cp(t){return t}static minus(t,e){return t-e}static plus(t,e){return t+e}static pp(t,e,r,n){return n-e-r+t}static depp(t,e,r,n){return e+r-t+n}constructor(t,e=4){this.indices=t,this.mode=e,this.attrs=[],this.attrIndexMap={}}getAttrLength(){return this.attrs[0].data.length/this.attrs[0].itemCount}attrIdToName(t){return o[t]||"OTHER"}addAttr(t,e,r){i[t]?(this.attrIndexMap[t]=this.attrs.length,r||(r=u[t])):r||(r=1),this.attrs.push({name:t,itemCount:r,data:e})}getAttr(t){if(this.attrIndexMap[t])return this.attrs[this.attrIndexMap[t]];for(var e=this.attrs.length-1;e>=0;e--){var r=this.attrs[e];if(r.name===t)return r}}cal(t,e,r,...n){this.attrs.forEach((i,o)=>{for(var s=i.data,c=t.attrs[o].data,a=e*i.itemCount,u=i.itemCount-1;u>=0;u--)c[a+u]=r.apply(null,n.map(t=>s[t*i.itemCount+u]))})}quantize(t={}){this.attrs.forEach(e=>{if("JOINT"!==e.name&&0!=t[e.name]){var r=n.encode(e.data,t[e.name]||12);e.quantizationBit=r.quantizationBit,e.min=r.min,e.max=r.max,e.data=r.data}})}dequantize(){this.attrs.forEach(t=>{t.quantizationBit&&(t.data=n.decode(t.data,t.quantizationBit,t.min,t.max))})}convertTypedArray(){!this.indices||this.indices instanceof Array||(this.indices=Array.from(this.indices)),this.attrs.forEach(t=>{t.data instanceof Array||t.data instanceof Float32Array||(t.data=Array.from(t.data))})}clearEBAttrs(){delete this.clers,delete this.holes,delete this.handles}convertToTypedArray(){this.indices instanceof Array&&(this.getAttrLength()>65535?this.indices=new Uint32Array(this.indices):this.indices=new Uint16Array(this.indices)),this.attrs.forEach(t=>{t.data instanceof Array&&(t.data=new Float32Array(t.data))})}prepareToWorkerSend(){return this.clearEBAttrs(),this.convertToTypedArray(),this.getAllBuffers()}clone(){const t=new f(Array.from(this.indices),this.mode);return Object.assign(t.attrIndexMap,this.attrIndexMap),t.attrs=this.attrs.map(t=>{const e=Object.assign({},t);return e.data=Array.from(e.data),e}),t}cloneStruct(){const t=new f;return t.mode=this.mode,this.indices&&(t.indices=[]),Object.assign(t.attrIndexMap,this.attrIndexMap),t.attrs=this.attrs.map(t=>{const e=Object.assign({},t);return e.data=[],e}),t}toHilo3dGeometry(t,e){const r=e||new t.Geometry;return this.indices&&(this.indices.BYTES_PER_ELEMENT?r.indices=new t.GeometryData(this.indices,1):this.getAttrLength()>65535?r.indices=new t.GeometryData(new Uint32Array(this.indices),1):r.indices=new t.GeometryData(new Uint16Array(this.indices),1)),this.attrs.forEach(e=>{const n=c[e.name];n&&(e.data.BYTES_PER_ELEMENT?r[n]=new t.GeometryData(e.data,e.itemCount):r[n]=new t.GeometryData(new Float32Array(e.data),e.itemCount))}),r}getAllBuffers(){const t=[];return this.indices.BYTES_PER_ELEMENT&&t.push(this.indices.buffer),this.attrs.forEach(e=>{e.data&&e.data.BYTES_PER_ELEMENT&&t.push(e.data.buffer)}),t}static fromGLTFPrimitive(t){const e=new f(t.indices,t.mode),r=t.attributes;let n=0;r.POSITION&&(n=r.POSITION.length/3);for(let t in r){if(!i[t]){console.warn("Dont support attribute",t);continue}let o=u[i[t]];n&&(o=r[t].length/n),e.addAttr(i[t],r[t],o)}return e}static fromHilo3dGeometry(t){const e=new f(t.indices.data,t.mode);for(var r in a)t[r]&&e.addAttr(a[r],t[r].data,t[r].size);return e}}t.exports=f},function(t,e){t.exports=require("fs")},function(t,e){t.exports=require("url")},function(t,e){t.exports=require("stream")},function(t,e,r){"use strict";const n=r(2).fromCallback,i=r(60);t.exports={remove:n(i),removeSync:i.sync}},,function(t,e,r){"use strict";const n=r(2).fromCallback,i=r(68);t.exports={readJson:n(i.readFile),readJsonSync:i.readFileSync,writeJson:n(i.writeFile),writeJsonSync:i.writeFileSync}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(76),i=4096,o="utf8";class s{constructor(t){if(this.length=0,this._encoding=o,this._writeOffset=0,this._readOffset=0,s.isSmartBufferOptions(t))if(t.encoding&&(n.checkEncoding(t.encoding),this._encoding=t.encoding),t.size){if(!(n.isFiniteInteger(t.size)&&t.size>0))throw new Error(n.ERRORS.INVALID_SMARTBUFFER_SIZE);this._buff=Buffer.allocUnsafe(t.size)}else if(t.buff){if(!(t.buff instanceof Buffer))throw new Error(n.ERRORS.INVALID_SMARTBUFFER_BUFFER);this._buff=t.buff,this.length=t.buff.length}else this._buff=Buffer.allocUnsafe(i);else{if(void 0!==t)throw new Error(n.ERRORS.INVALID_SMARTBUFFER_OBJECT);this._buff=Buffer.allocUnsafe(i)}}static fromSize(t,e){return new this({size:t,encoding:e})}static fromBuffer(t,e){return new this({buff:t,encoding:e})}static fromOptions(t){return new this(t)}static isSmartBufferOptions(t){const e=t;return e&&(void 0!==e.encoding||void 0!==e.size||void 0!==e.buff)}readInt8(t){return this._readNumberValue(Buffer.prototype.readInt8,1,t)}readInt16BE(t){return this._readNumberValue(Buffer.prototype.readInt16BE,2,t)}readInt16LE(t){return this._readNumberValue(Buffer.prototype.readInt16LE,2,t)}readInt32BE(t){return this._readNumberValue(Buffer.prototype.readInt32BE,4,t)}readInt32LE(t){return this._readNumberValue(Buffer.prototype.readInt32LE,4,t)}writeInt8(t,e){return this._writeNumberValue(Buffer.prototype.writeInt8,1,t,e),this}insertInt8(t,e){return this._insertNumberValue(Buffer.prototype.writeInt8,1,t,e),this}writeInt16BE(t,e){return this._writeNumberValue(Buffer.prototype.writeInt16BE,2,t,e),this}insertInt16BE(t,e){return this._insertNumberValue(Buffer.prototype.writeInt16BE,2,t,e),this}writeInt16LE(t,e){return this._writeNumberValue(Buffer.prototype.writeInt16LE,2,t,e),this}insertInt16LE(t,e){return this._insertNumberValue(Buffer.prototype.writeInt16LE,2,t,e),this}writeInt32BE(t,e){return this._writeNumberValue(Buffer.prototype.writeInt32BE,4,t,e),this}insertInt32BE(t,e){return this._insertNumberValue(Buffer.prototype.writeInt32BE,4,t,e),this}writeInt32LE(t,e){return this._writeNumberValue(Buffer.prototype.writeInt32LE,4,t,e),this}insertInt32LE(t,e){return this._insertNumberValue(Buffer.prototype.writeInt32LE,4,t,e),this}readUInt8(t){return this._readNumberValue(Buffer.prototype.readUInt8,1,t)}readUInt16BE(t){return this._readNumberValue(Buffer.prototype.readUInt16BE,2,t)}readUInt16LE(t){return this._readNumberValue(Buffer.prototype.readUInt16LE,2,t)}readUInt32BE(t){return this._readNumberValue(Buffer.prototype.readUInt32BE,4,t)}readUInt32LE(t){return this._readNumberValue(Buffer.prototype.readUInt32LE,4,t)}writeUInt8(t,e){return this._writeNumberValue(Buffer.prototype.writeUInt8,1,t,e),this}insertUInt8(t,e){return this._insertNumberValue(Buffer.prototype.writeUInt8,1,t,e),this}writeUInt16BE(t,e){return this._writeNumberValue(Buffer.prototype.writeUInt16BE,2,t,e),this}insertUInt16BE(t,e){return this._insertNumberValue(Buffer.prototype.writeUInt16BE,2,t,e),this}writeUInt16LE(t,e){return this._writeNumberValue(Buffer.prototype.writeUInt16LE,2,t,e),this}insertUInt16LE(t,e){return this._insertNumberValue(Buffer.prototype.writeUInt16LE,2,t,e),this}writeUInt32BE(t,e){return this._writeNumberValue(Buffer.prototype.writeUInt32BE,4,t,e),this}insertUInt32BE(t,e){return this._insertNumberValue(Buffer.prototype.writeUInt32BE,4,t,e),this}writeUInt32LE(t,e){return this._writeNumberValue(Buffer.prototype.writeUInt32LE,4,t,e),this}insertUInt32LE(t,e){return this._insertNumberValue(Buffer.prototype.writeUInt32LE,4,t,e),this}readFloatBE(t){return this._readNumberValue(Buffer.prototype.readFloatBE,4,t)}readFloatLE(t){return this._readNumberValue(Buffer.prototype.readFloatLE,4,t)}writeFloatBE(t,e){return this._writeNumberValue(Buffer.prototype.writeFloatBE,4,t,e),this}insertFloatBE(t,e){return this._insertNumberValue(Buffer.prototype.writeFloatBE,4,t,e),this}writeFloatLE(t,e){return this._writeNumberValue(Buffer.prototype.writeFloatLE,4,t,e),this}insertFloatLE(t,e){return this._insertNumberValue(Buffer.prototype.writeFloatLE,4,t,e),this}readDoubleBE(t){return this._readNumberValue(Buffer.prototype.readDoubleBE,8,t)}readDoubleLE(t){return this._readNumberValue(Buffer.prototype.readDoubleLE,8,t)}writeDoubleBE(t,e){return this._writeNumberValue(Buffer.prototype.writeDoubleBE,8,t,e),this}insertDoubleBE(t,e){return this._insertNumberValue(Buffer.prototype.writeDoubleBE,8,t,e),this}writeDoubleLE(t,e){return this._writeNumberValue(Buffer.prototype.writeDoubleLE,8,t,e),this}insertDoubleLE(t,e){return this._insertNumberValue(Buffer.prototype.writeDoubleLE,8,t,e),this}readString(t,e){let r;"number"==typeof t?(n.checkLengthValue(t),r=Math.min(t,this.length-this._readOffset)):(e=t,r=this.length-this._readOffset),void 0!==e&&n.checkEncoding(e);const i=this._buff.slice(this._readOffset,this._readOffset+r).toString(e||this._encoding);return this._readOffset+=r,i}insertString(t,e,r){return n.checkOffsetValue(e),this._handleString(t,!0,e,r)}writeString(t,e,r){return this._handleString(t,!1,e,r)}readStringNT(t){void 0!==t&&n.checkEncoding(t);let e=this.length;for(let t=this._readOffset;t<this.length;t++)if(0===this._buff[t]){e=t;break}const r=this._buff.slice(this._readOffset,e);return this._readOffset=e+1,r.toString(t||this._encoding)}insertStringNT(t,e,r){n.checkOffsetValue(e),this.insertString(t,e,r),this.insertUInt8(0,e+t.length)}writeStringNT(t,e,r){this.writeString(t,e,r),this.writeUInt8(0,"number"==typeof e?e+t.length:this.writeOffset)}readBuffer(t){void 0!==t&&n.checkLengthValue(t);const e="number"==typeof t?t:this.length,r=Math.min(this.length,this._readOffset+e),i=this._buff.slice(this._readOffset,r);return this._readOffset=r,i}insertBuffer(t,e){return n.checkOffsetValue(e),this._handleBuffer(t,!0,e)}writeBuffer(t,e){return this._handleBuffer(t,!1,e)}readBufferNT(){let t=this.length;for(let e=this._readOffset;e<this.length;e++)if(0===this._buff[e]){t=e;break}const e=this._buff.slice(this._readOffset,t);return this._readOffset=t+1,e}insertBufferNT(t,e){return n.checkOffsetValue(e),this.insertBuffer(t,e),this.insertUInt8(0,e+t.length),this}writeBufferNT(t,e){return void 0!==e&&n.checkOffsetValue(e),this.writeBuffer(t,e),this.writeUInt8(0,"number"==typeof e?e+t.length:this._writeOffset),this}clear(){return this._writeOffset=0,this._readOffset=0,this.length=0,this}remaining(){return this.length-this._readOffset}get readOffset(){return this._readOffset}set readOffset(t){n.checkOffsetValue(t),n.checkTargetOffset(t,this),this._readOffset=t}get writeOffset(){return this._writeOffset}set writeOffset(t){n.checkOffsetValue(t),n.checkTargetOffset(t,this),this._writeOffset=t}get encoding(){return this._encoding}set encoding(t){n.checkEncoding(t),this._encoding=t}get internalBuffer(){return this._buff}toBuffer(){return this._buff.slice(0,this.length)}toString(t){const e="string"==typeof t?t:this._encoding;return n.checkEncoding(e),this._buff.toString(e,0,this.length)}destroy(){return this.clear(),this}_handleString(t,e,r,i){let o=this._writeOffset,s=this._encoding;"number"==typeof r?o=r:"string"==typeof r&&(n.checkEncoding(r),s=r),"string"==typeof i&&(n.checkEncoding(i),s=i);const c=Buffer.byteLength(t,s);return e?this.ensureInsertable(c,o):this._ensureWriteable(c,o),this._buff.write(t,o,c,s),e?this._writeOffset+=c:"number"==typeof r?this._writeOffset=Math.max(this._writeOffset,o+c):this._writeOffset+=c,this}_handleBuffer(t,e,r){const n="number"==typeof r?r:this._writeOffset;return e?this.ensureInsertable(t.length,n):this._ensureWriteable(t.length,n),t.copy(this._buff,n),e?this._writeOffset+=t.length:"number"==typeof r?this._writeOffset=Math.max(this._writeOffset,n+t.length):this._writeOffset+=t.length,this}ensureReadable(t,e){let r=this._readOffset;if(void 0!==e&&(n.checkOffsetValue(e),r=e),r<0||r+t>this.length)throw new Error(n.ERRORS.INVALID_READ_BEYOND_BOUNDS)}ensureInsertable(t,e){n.checkOffsetValue(e),this._ensureCapacity(this.length+t),e<this.length&&this._buff.copy(this._buff,e+t,e,this._buff.length),e+t>this.length?this.length=e+t:this.length+=t}_ensureWriteable(t,e){const r="number"==typeof e?e:this._writeOffset;this._ensureCapacity(r+t),r+t>this.length&&(this.length=r+t)}_ensureCapacity(t){const e=this._buff.length;if(t>e){let r=this._buff,n=3*e/2+1;n<t&&(n=t),this._buff=Buffer.allocUnsafe(n),r.copy(this._buff,0,0,e)}}_readNumberValue(t,e,r){this.ensureReadable(e,r);const n=t.call(this._buff,"number"==typeof r?r:this._readOffset);return void 0===r&&(this._readOffset+=e),n}_insertNumberValue(t,e,r,i){n.checkOffsetValue(i),this.ensureInsertable(e,i),t.call(this._buff,r,i),this._writeOffset+=e}_writeNumberValue(t,e,r,i){if("number"==typeof i){if(i<0)throw new Error(n.ERRORS.INVALID_WRITE_BEYOND_BOUNDS);n.checkOffsetValue(i)}const o="number"==typeof i?i:this._writeOffset;this._ensureWriteable(e,o),t.call(this._buff,r,o),"number"==typeof i?this._writeOffset=Math.max(this._writeOffset,o+e):this._writeOffset+=e}}e.SmartBuffer=s},function(t,e){const r={C:0,R:1,L:2,S:3,E:4,M:5,F:6},n=[];for(var i in r)n[r[i]]=i;r.map=n,t.exports=r},,,,function(t,e,r){"use strict";t.exports=Object.assign({},r(19),r(22),r(26),r(59),r(61),r(67),r(3),r(71),r(72),r(73),r(4),r(10));const n=r(7);Object.getOwnPropertyDescriptor(n,"promises")&&Object.defineProperty(t.exports,"promises",{get:()=>n.promises})},function(t,e,r){"use strict";const n=r(2).fromCallback,i=r(1),o=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(t=>"function"==typeof i[t]);Object.keys(i).forEach(t=>{"promises"!==t&&(e[t]=i[t])}),o.forEach(t=>{e[t]=n(i[t])}),e.exists=function(t,e){return"function"==typeof e?i.exists(t,e):new Promise(e=>i.exists(t,e))},e.read=function(t,e,r,n,o,s){return"function"==typeof s?i.read(t,e,r,n,o,s):new Promise((s,c)=>{i.read(t,e,r,n,o,(t,e,r)=>{if(t)return c(t);s({bytesRead:e,buffer:r})})})},e.write=function(t,e,...r){return"function"==typeof r[r.length-1]?i.write(t,e,...r):new Promise((n,o)=>{i.write(t,e,...r,(t,e,r)=>{if(t)return o(t);n({bytesWritten:e,buffer:r})})})}},function(t,e,r){"use strict";var n=r(7);t.exports=function(t){if(null===t||"object"!=typeof t)return t;if(t instanceof Object)var e={__proto__:t.__proto__};else e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}(n)},function(t,e){t.exports=require("assert")},function(t,e,r){"use strict";t.exports={copySync:r(54)}},function(t,e,r){"use strict";const n=r(0);function i(t){return(t=n.normalize(n.resolve(t)).split(n.sep)).length>0?t[0]:null}const o=/[<>:"|?*]/;t.exports={getRootPath:i,invalidWin32Path:function(t){const e=i(t);return t=t.replace(e,""),o.test(t)}}},function(t,e,r){"use strict";const n=r(1),i=r(57),o=r(0);t.exports={hasMillisRes:function(t){let e=o.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));e=o.join(i.tmpdir(),e);const r=new Date(1435410243862);n.writeFile(e,"https://github.com/jprichardson/node-fs-extra/pull/141",i=>{if(i)return t(i);n.open(e,"r+",(i,o)=>{if(i)return t(i);n.futimes(o,r,r,r=>{if(r)return t(r);n.close(o,r=>{if(r)return t(r);n.stat(e,(e,r)=>{if(e)return t(e);t(null,r.mtime>1435410243e3)})})})})})},hasMillisResSync:function(){let t=o.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));t=o.join(i.tmpdir(),t);const e=new Date(1435410243862);n.writeFileSync(t,"https://github.com/jprichardson/node-fs-extra/pull/141");const r=n.openSync(t,"r+");return n.futimesSync(r,e,e),n.closeSync(r),n.statSync(t).mtime>1435410243e3},timeRemoveMillis:function(t){if("number"==typeof t)return 1e3*Math.floor(t/1e3);if(t instanceof Date)return new Date(1e3*Math.floor(t.getTime()/1e3));throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")},utimesMillis:function(t,e,r,i){n.open(t,"r+",(t,o)=>{if(t)return i(t);n.futimes(o,e,r,t=>{n.close(o,e=>{i&&i(t||e)})})})},utimesMillisSync:function(t,e,r){const i=n.openSync(t,"r+");return n.futimesSync(i,e,r),n.closeSync(i)}}},function(t,e,r){"use strict";t.exports=function(t){if("function"==typeof Buffer.allocUnsafe)try{return Buffer.allocUnsafe(t)}catch(e){return new Buffer(t)}return new Buffer(t)}},function(t,e,r){"use strict";const n=r(2).fromCallback;t.exports={copy:n(r(58))}},function(t,e){t.exports=require("http")},function(t,e){var r={};function n(t){return r[t]||(r[t]=Math.pow(2,t)-1),r[t]}t.exports={cal:function(t,e,r,i){const o=n(i),s=r-e;return Math.round((t-e)/s*o)},encode:function(t,e=8){const r=t.length,i=n(e);for(var o=1/0,s=-1/0,c=0;c<r;c++)o=Math.min(o,t[c]),s=Math.max(s,t[c]);const a=s-o||1,u=[];for(c=0;c<r;c++)u[c]=Math.round((t[c]-o)/a*i);return{min:o,max:s,quantizationBit:e,data:u}},encodeWithMinAndMax:function(t,e=[],r=0,i=1,o=8){const s=t.length,c=n(o),a=i-r||1;for(var u=0;u<s;u++)e[u]=Math.round((t[u]-r)/a*c);return e},decode:function(t,e=8,r,i){const o=t.length,s=n(e),c=i-r,a=new Float32Array(o);for(var u=0;u<o;u++)a[u]=r+c*(t[u]/s);return a},normalize:function(t,e=[],r=3){const n=t.length;for(var i=0;i<n;i+=r){for(var o=0,s=0;s<r;s++)o+=t[i+s]*t[i+s];o=Math.sqrt(o);for(s=0;s<r;s++)e[i+s]=t[i+s]/o}return e}}},function(t,e){function r(){}function n(t){this._tree=t,this._ancestors=[],this._cursor=null}r.prototype.clear=function(){this._root=null,this.size=0},r.prototype.find=function(t){for(var e=this._root;null!==e;){var r=this._comparator(t,e.data);if(0===r)return e.data;e=e.get_child(r>0)}return null},r.prototype.findIter=function(t){for(var e=this._root,r=this.iterator();null!==e;){var n=this._comparator(t,e.data);if(0===n)return r._cursor=e,r;r._ancestors.push(e),e=e.get_child(n>0)}return null},r.prototype.lowerBound=function(t){for(var e=this._root,r=this.iterator(),n=this._comparator;null!==e;){var i=n(t,e.data);if(0===i)return r._cursor=e,r;r._ancestors.push(e),e=e.get_child(i>0)}for(var o=r._ancestors.length-1;o>=0;--o)if(n(t,(e=r._ancestors[o]).data)<0)return r._cursor=e,r._ancestors.length=o,r;return r._ancestors.length=0,r},r.prototype.upperBound=function(t){for(var e=this.lowerBound(t),r=this._comparator;null!==e.data()&&0===r(e.data(),t);)e.next();return e},r.prototype.min=function(){var t=this._root;if(null===t)return null;for(;null!==t.left;)t=t.left;return t.data},r.prototype.max=function(){var t=this._root;if(null===t)return null;for(;null!==t.right;)t=t.right;return t.data},r.prototype.iterator=function(){return new n(this)},r.prototype.each=function(t){for(var e,r=this.iterator();null!==(e=r.next());)if(!1===t(e))return},r.prototype.reach=function(t){for(var e,r=this.iterator();null!==(e=r.prev());)if(!1===t(e))return},n.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},n.prototype.next=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._minNode(t)}else{var e;if(null===this._cursor.right)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===e);else this._ancestors.push(this._cursor),this._minNode(this._cursor.right)}return null!==this._cursor?this._cursor.data:null},n.prototype.prev=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._maxNode(t)}else{var e;if(null===this._cursor.left)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===e);else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left)}return null!==this._cursor?this._cursor.data:null},n.prototype._minNode=function(t){for(;null!==t.left;)this._ancestors.push(t),t=t.left;this._cursor=t},n.prototype._maxNode=function(t){for(;null!==t.right;)this._ancestors.push(t),t=t.right;this._cursor=t},t.exports=r},,,,,,,,,,,,,,,,,,function(t,e,r){t.exports=r(48)},function(t,e,r){t.exports=r(49)},function(t,e,r){const n=r(8),i=r(0),o=r(18),s=r(74),c=r(13).SmartBuffer,a=r(77),u=r(78),{Geometry:f,AMCompression:l}=r(83),h={5120:[1,Int8Array],5121:[1,Uint8Array],5122:[2,Int16Array],5123:[2,Uint16Array],5125:[4,Uint32Array],5126:[4,Float32Array]},d={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function p(t,e,r,n){const i=e.BYTES_PER_ELEMENT;if(r%i){return new e(t.slice(r,r+n*i))}return new e(t,r,n)}function y(t,e){const r=t.accessors[e];if(r._data)return r._data;const[n,i]=h[r.componentType],o=d[r.type],s=t.bufferViews[r.bufferView],c=r.count*o,a=t.buffers[s.buffer]._buf,u=(r.byteOffset||0)+s.byteOffset;var f;if(s.byteStride&&s.byteStride>o*n){f=new i(c);for(let t=0;t<r.count;t++){const e=p(a,i,u+s.byteStride*t,o);f.set(e,t*o)}}else f=p(a,i,u,c);if(r.sparse)throw new Error("dont support sparsed accessor!");if(r._data=f,r.normalized)throw new Error("dont support normalized accessor!");return f}function m(t,e){const r=[],n={},i=[],o={};u.each(t.accessors,(s,a)=>{if(e[a])return;const u=t.bufferViews[s.bufferView];s.bufferView in o||(o[s.bufferView]=i.length,i.push(Object.assign({},u,{buffer:0,_buf:new c})));const f=o[s.bufferView],l=i[f]._buf,p=h[s.componentType][0]*d[s.type]*s.count,y=u.byteOffset+(s.byteOffset||0);s.byteOffset=l.writeOffset,s.bufferView=f,l.writeBuffer(Buffer.from(t.buffers[u.buffer]._buf.slice(y,y+p))),n[a]=r.length,r.push(s)}),t.accessors=r;const s=new c;i.forEach(t=>{t.byteLength=t._buf.writeOffset,t.byteOffset=s.writeOffset,s.writeBuffer(t._buf.toBuffer()),delete t._buf}),u.each(t.meshes,t=>{u.each(t.primitives,e=>{i.push({buffer:0,byteOffset:s.writeOffset,byteLength:e._buf.byteLength}),s.writeBuffer(e._buf),delete e._buf,e.extensions={ALI_amc_mesh_compression:{bufferView:i.length-1}},e.amcTargets&&(e.extensions.ALI_amc_mesh_compression.targets=e.amcTargets,t.weights&&(e.extensions.ALI_amc_mesh_compression.weights=t.weights),delete e.amcTargets)})}),t.bufferViews=i,t.buffers=[{byteLength:s.writeOffset,_buf:s.toBuffer()}],function(t,e){u.each(t.animations,t=>{u.each(t.samplers,t=>{t.input=e[t.input],t.output=e[t.output]})}),u.each(t.skins,t=>{t.inverseBindMatrices=e[t.inverseBindMatrices]})}(t,n)}async function b(t,e,r){if(/\.glb$/i.test(e))return await async function(t,e,r){const n=new c;n.writeUInt32LE(1179937895),n.writeUInt32LE(2),n.writeUInt32LE(0);const s=t.buffers[0]._buf;delete t.buffers[0]._buf,delete t.buffers[0].uri;let u=s.byteLength;const f=[];u=await g(t,t.images,i.dirname(r),f,u);const l=a.get(t,"extensions.KHR_techniques_webgl.shaders");u=await g(t,l,i.dirname(r),f,u);const h=Buffer.from(JSON.stringify(t));n.writeUInt32LE(h.byteLength),n.writeUInt32LE(1313821514),n.writeBuffer(h),n.writeUInt32LE(u),n.writeUInt32LE(5130562),n.writeBuffer(s),f.forEach(t=>n.writeBuffer(t)),n.writeUInt32LE(n.writeOffset,8),await o.writeFile(e,n.toBuffer())}(t,e,r);await w(t.images,r,e),await w(a.get(t,"extensions.KHR_techniques_webgl.shaders"),r,e);const n=i.basename(e,i.extname(e));t.buffers[0].uri=n+".bin",await o.writeFile(i.join(i.dirname(e),n+".bin"),t.buffers[0]._buf),delete t.buffers[0]._buf,await o.writeFile(e,JSON.stringify(t))}async function g(t,e,r,n,s){if(!e||e.length<1)return s;for(let c=0;c<e.length;c++){const a=e[c];a.uri&&!/^https?|^\/\//.test(a.uri)&&(n[c]=await o.readFile(i.resolve(r,a.uri)),a.bufferView=t.bufferViews.length,delete a.uri,t.bufferViews.push({buffer:0,byteLength:n[c].byteLength,byteOffset:s}),s+=n[c].byteLength)}return s}async function w(t,e,r){if(t&&0!==t.length)for(const i of t)if(!/^https?:/.test(i.uri)){const t=n.resolve(e,i.uri),s=n.resolve(r,i.uri);if(t===s)continue;await o.pathExists(t)?await o.copy(t,s):console.warn("file not found:",t)}}t.exports=async function(t,e,r){const n=await async function(t){const e=await u.getBuffer(t);var r;if(1179937895===e.readUInt32LE(0))throw new Error("binary glTF will support later!");r=String(e);const n=JSON.parse(r);if(parseFloat(n.asset.version)<2)throw new Error("dont support glTF version",n.asset.version);return n}(t);await async function(t,e){const r=e.buffers;for(var n=0;n<r.length;n++){const e=await u.getBuffer(u.getRelativePath(t,r[n].uri));r[n]._buf=e.buffer}}(t,n);const i=new s("compressing meshes [:bar] :percent :etas/:elapseds | :current/:total",{stream:process.stdout,total:n.meshes.length,complete:"=",incomplete:"-",width:40}),o={};u.each(n.meshes,t=>{u.each(t.primitives,t=>{if(!("indices"in t))throw new Error("dont support model has no indices");o[t.indices]=1,t.indices=y(n,t.indices),t.indices=t.indices.slice();const e=t.attributes;u.each(e,(t,r)=>{o[t]=1,e[r]=y(n,t)});const i=f.fromGLTFPrimitive(t);if(t.targets){const e=[];vertexCount=i.getAttrLength(),u.each(t.targets,t=>{const r={};u.each(t,(t,e)=>{o[t]=1,data=y(n,t),i.addAttr("OTHER",data,data.length/vertexCount),r[e]=i.attrs.length-1}),e.push(r)}),t.amcTargets=e,delete t.targets}t._buf=l.compressToBuffer(null,i,r).toBuffer(),delete t.indices,delete t.attributes}),i.tick()}),m(n,o),u.addExtensions("All",n,"ALI_amc_mesh_compression"),await b(n,e,t),console.log("compressed glTF file saved to",e)}},function(t,e,r){var n=r(20),i=r(51),o=process.cwd,s=null,c=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return s||(s=o.call(process)),s};try{process.cwd()}catch(t){}var a=process.chdir;function u(t){return t?function(e,r,i){return t.call(n,e,r,function(t){y(t)&&(t=null),i&&i.apply(this,arguments)})}:t}function f(t){return t?function(e,r){try{return t.call(n,e,r)}catch(t){if(!y(t))throw t}}:t}function l(t){return t?function(e,r,i,o){return t.call(n,e,r,i,function(t){y(t)&&(t=null),o&&o.apply(this,arguments)})}:t}function h(t){return t?function(e,r,i){try{return t.call(n,e,r,i)}catch(t){if(!y(t))throw t}}:t}function d(t){return t?function(e,r){return t.call(n,e,function(t,e){if(!e)return r.apply(this,arguments);e.uid<0&&(e.uid+=4294967296),e.gid<0&&(e.gid+=4294967296),r&&r.apply(this,arguments)})}:t}function p(t){return t?function(e){var r=t.call(n,e);return r.uid<0&&(r.uid+=4294967296),r.gid<0&&(r.gid+=4294967296),r}:t}function y(t){return!t||("ENOSYS"===t.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==t.code&&"EPERM"!==t.code))}process.chdir=function(t){s=null,a.call(process,t)},t.exports=function(t){i.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(t){t.lchmod=function(e,r,n){t.open(e,i.O_WRONLY|i.O_SYMLINK,r,function(e,i){e?n&&n(e):t.fchmod(i,r,function(e){t.close(i,function(t){n&&n(e||t)})})})},t.lchmodSync=function(e,r){var n,o=t.openSync(e,i.O_WRONLY|i.O_SYMLINK,r),s=!0;try{n=t.fchmodSync(o,r),s=!1}finally{if(s)try{t.closeSync(o)}catch(t){}else t.closeSync(o)}return n}}(t);t.lutimes||function(t){i.hasOwnProperty("O_SYMLINK")?(t.lutimes=function(e,r,n,o){t.open(e,i.O_SYMLINK,function(e,i){e?o&&o(e):t.futimes(i,r,n,function(e){t.close(i,function(t){o&&o(e||t)})})})},t.lutimesSync=function(e,r,n){var o,s=t.openSync(e,i.O_SYMLINK),c=!0;try{o=t.futimesSync(s,r,n),c=!1}finally{if(c)try{t.closeSync(s)}catch(t){}else t.closeSync(s)}return o}):(t.lutimes=function(t,e,r,n){n&&process.nextTick(n)},t.lutimesSync=function(){})}(t);t.chown=l(t.chown),t.fchown=l(t.fchown),t.lchown=l(t.lchown),t.chmod=u(t.chmod),t.fchmod=u(t.fchmod),t.lchmod=u(t.lchmod),t.chownSync=h(t.chownSync),t.fchownSync=h(t.fchownSync),t.lchownSync=h(t.lchownSync),t.chmodSync=f(t.chmodSync),t.fchmodSync=f(t.fchmodSync),t.lchmodSync=f(t.lchmodSync),t.stat=d(t.stat),t.fstat=d(t.fstat),t.lstat=d(t.lstat),t.statSync=p(t.statSync),t.fstatSync=p(t.fstatSync),t.lstatSync=p(t.lstatSync),t.lchmod||(t.lchmod=function(t,e,r){r&&process.nextTick(r)},t.lchmodSync=function(){});t.lchown||(t.lchown=function(t,e,r,n){n&&process.nextTick(n)},t.lchownSync=function(){});"win32"===c&&(t.rename=(e=t.rename,function(r,n,i){var o=Date.now(),s=0;e(r,n,function c(a){if(a&&("EACCES"===a.code||"EPERM"===a.code)&&Date.now()-o<6e4)return setTimeout(function(){t.stat(n,function(t,o){t&&"ENOENT"===t.code?e(r,n,c):i(a)})},s),void(s<100&&(s+=10));i&&i(a)})}));var e;t.read=(n=t.read,function(e,r,i,o,s,c){var a;if(c&&"function"==typeof c){var u=0;a=function(f,l,h){if(f&&"EAGAIN"===f.code&&u<10)return u++,n.call(t,e,r,i,o,s,a);c.apply(this,arguments)}}return n.call(t,e,r,i,o,s,a)}),t.readSync=(r=t.readSync,function(e,n,i,o,s){for(var c=0;;)try{return r.call(t,e,n,i,o,s)}catch(t){if("EAGAIN"===t.code&&c<10){c++;continue}throw t}});var r;var n}},function(t,e){t.exports=require("constants")},function(t,e,r){var n=r(9).Stream;t.exports=function(t){return{ReadStream:function e(r,i){if(!(this instanceof e))return new e(r,i);n.call(this);var o=this;this.path=r;this.fd=null;this.readable=!0;this.paused=!1;this.flags="r";this.mode=438;this.bufferSize=65536;i=i||{};var s=Object.keys(i);for(var c=0,a=s.length;c<a;c++){var u=s[c];this[u]=i[u]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick(function(){o._read()});t.open(this.path,this.flags,this.mode,function(t,e){if(t)return o.emit("error",t),void(o.readable=!1);o.fd=e,o.emit("open",e),o._read()})},WriteStream:function e(r,i){if(!(this instanceof e))return new e(r,i);n.call(this);this.path=r;this.fd=null;this.writable=!0;this.flags="w";this.encoding="binary";this.mode=438;this.bytesWritten=0;i=i||{};var o=Object.keys(i);for(var s=0,c=o.length;s<c;s++){var a=o[s];this[a]=i[a]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1;this._queue=[];null===this.fd&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}},function(t,e){t.exports=require("util")},function(t,e,r){"use strict";const n=r(1),i=r(0),o=r(3).mkdirsSync,s=r(24).utimesMillisSync,c=Symbol("notExist");function a(t,e,r,o){if(!o.filter||o.filter(e,r))return function(t,e,r,o){const s=(o.dereference?n.statSync:n.lstatSync)(e);if(s.isDirectory())return function(t,e,r,i,o){if(e===c)return function(t,e,r,i){return n.mkdirSync(r),f(e,r,i),n.chmodSync(r,t.mode)}(t,r,i,o);if(e&&!e.isDirectory())throw new Error(`Cannot overwrite non-directory '${i}' with directory '${r}'.`);return f(r,i,o)}(s,t,e,r,o);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return function(t,e,r,i,o){return e===c?u(t,r,i,o):function(t,e,r,i){if(i.overwrite)return n.unlinkSync(r),u(t,e,r,i);if(i.errorOnExist)throw new Error(`'${r}' already exists`)}(t,r,i,o)}(s,t,e,r,o);if(s.isSymbolicLink())return function(t,e,r,o){let s=n.readlinkSync(e);o.dereference&&(s=i.resolve(process.cwd(),s));if(t===c)return n.symlinkSync(s,r);{let t;try{t=n.readlinkSync(r)}catch(t){if("EINVAL"===t.code||"UNKNOWN"===t.code)return n.symlinkSync(s,r);throw t}if(o.dereference&&(t=i.resolve(process.cwd(),t)),l(s,t))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${t}'.`);if(n.statSync(r).isDirectory()&&l(t,s))throw new Error(`Cannot overwrite '${t}' with '${s}'.`);return function(t,e){return n.unlinkSync(e),n.symlinkSync(t,e)}(s,r)}}(t,e,r,o)}(t,e,r,o)}function u(t,e,i,o){return"function"==typeof n.copyFileSync?(n.copyFileSync(e,i),n.chmodSync(i,t.mode),o.preserveTimestamps?s(i,t.atime,t.mtime):void 0):function(t,e,i,o){const s=r(25)(65536),c=n.openSync(e,"r"),a=n.openSync(i,"w",t.mode);let u=0;for(;u<t.size;){const t=n.readSync(c,s,0,65536,u);n.writeSync(a,s,0,t),u+=t}o.preserveTimestamps&&n.futimesSync(a,t.atime,t.mtime);n.closeSync(c),n.closeSync(a)}(t,e,i,o)}function f(t,e,r){n.readdirSync(t).forEach(n=>(function(t,e,r,n){const o=i.join(e,t),s=i.join(r,t);return a(h(o,s),o,s,n)})(n,t,e,r))}function l(t,e){const r=i.resolve(t).split(i.sep),n=i.resolve(e).split(i.sep);return r.reduce((t,e,r)=>t&&n[r]===e,!0)}function h(t,e){const{srcStat:r,destStat:i}=function(t,e){const r=n.statSync(t);let i;try{i=n.statSync(e)}catch(t){if("ENOENT"===t.code)return{srcStat:r,destStat:c};throw t}return{srcStat:r,destStat:i}}(t,e);if(i.ino&&i.ino===r.ino)throw new Error("Source and destination must not be the same.");if(r.isDirectory()&&l(t,e))throw new Error(`Cannot copy '${t}' to a subdirectory of itself, '${e}'.`);return i}t.exports=function(t,e,r){"function"==typeof r&&(r={filter:r}),(r=r||{}).clobber=!("clobber"in r)||!!r.clobber,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269");const s=h(t,e);if(r.filter&&!r.filter(t,e))return;const c=i.dirname(e);return n.existsSync(c)||o(c),a(s,t,e,r)}},function(t,e,r){"use strict";const n=r(1),i=r(0),o=r(23).invalidWin32Path,s=parseInt("0777",8);t.exports=function t(e,r,c,a){if("function"==typeof r?(c=r,r={}):r&&"object"==typeof r||(r={mode:r}),"win32"===process.platform&&o(e)){const t=new Error(e+" contains invalid WIN32 path characters.");return t.code="EINVAL",c(t)}let u=r.mode;const f=r.fs||n;void 0===u&&(u=s&~process.umask()),a||(a=null),c=c||function(){},e=i.resolve(e),f.mkdir(e,u,n=>{if(!n)return c(null,a=a||e);switch(n.code){case"ENOENT":if(i.dirname(e)===e)return c(n);t(i.dirname(e),r,(n,i)=>{n?c(n,i):t(e,r,c,i)});break;default:f.stat(e,(t,e)=>{t||!e.isDirectory()?c(n,a):c(null,a)})}})}},function(t,e,r){"use strict";const n=r(1),i=r(0),o=r(23).invalidWin32Path,s=parseInt("0777",8);t.exports=function t(e,r,c){r&&"object"==typeof r||(r={mode:r});let a=r.mode;const u=r.fs||n;if("win32"===process.platform&&o(e)){const t=new Error(e+" contains invalid WIN32 path characters.");throw t.code="EINVAL",t}void 0===a&&(a=s&~process.umask()),c||(c=null),e=i.resolve(e);try{u.mkdirSync(e,a),c=c||e}catch(n){if("ENOENT"===n.code){if(i.dirname(e)===e)throw n;c=t(i.dirname(e),r,c),t(e,r,c)}else{let t;try{t=u.statSync(e)}catch(t){throw n}if(!t.isDirectory())throw n}}return c}},function(t,e){t.exports=require("os")},function(t,e,r){"use strict";const n=r(1),i=r(0),o=r(3).mkdirs,s=r(4).pathExists,c=r(24).utimesMillis,a=Symbol("notExist");function u(t,e,r,n,c){const a=i.dirname(r);s(a,(i,s)=>i?c(i):s?l(t,e,r,n,c):void o(a,i=>i?c(i):l(t,e,r,n,c)))}function f(t,e,r,n,i,o){Promise.resolve(i.filter(r,n)).then(s=>s?e?t(e,r,n,i,o):t(r,n,i,o):o(),t=>o(t))}function l(t,e,r,n,i){return n.filter?f(h,t,e,r,n,i):h(t,e,r,n,i)}function h(t,e,r,o,s){(o.dereference?n.stat:n.lstat)(e,(c,u)=>c?s(c):u.isDirectory()?function(t,e,r,i,o,s){if(e===a)return function(t,e,r,i,o){n.mkdir(r,s=>{if(s)return o(s);y(e,r,i,e=>e?o(e):n.chmod(r,t.mode,o))})}(t,r,i,o,s);if(e&&!e.isDirectory())return s(new Error(`Cannot overwrite non-directory '${i}' with directory '${r}'.`));return y(r,i,o,s)}(u,t,e,r,o,s):u.isFile()||u.isCharacterDevice()||u.isBlockDevice()?function(t,e,r,i,o,s){return e===a?d(t,r,i,o,s):function(t,e,r,i,o){if(!i.overwrite)return i.errorOnExist?o(new Error(`'${r}' already exists`)):o();n.unlink(r,n=>n?o(n):d(t,e,r,i,o))}(t,r,i,o,s)}(u,t,e,r,o,s):u.isSymbolicLink()?function(t,e,r,o,s){n.readlink(e,(e,c)=>e?s(e):(o.dereference&&(c=i.resolve(process.cwd(),c)),t===a?n.symlink(c,r,s):void n.readlink(r,(e,a)=>e?"EINVAL"===e.code||"UNKNOWN"===e.code?n.symlink(c,r,s):s(e):(o.dereference&&(a=i.resolve(process.cwd(),a)),b(c,a)?s(new Error(`Cannot copy '${c}' to a subdirectory of itself, '${a}'.`)):t.isDirectory()&&b(a,c)?s(new Error(`Cannot overwrite '${a}' with '${c}'.`)):function(t,e,r){n.unlink(e,i=>i?r(i):n.symlink(t,e,r))}(c,r,s)))))}(t,e,r,o,s):void 0)}function d(t,e,r,i,o){return"function"==typeof n.copyFile?n.copyFile(e,r,e=>e?o(e):p(t,r,i,o)):function(t,e,r,i,o){const s=n.createReadStream(e);s.on("error",t=>o(t)).once("open",()=>{const e=n.createWriteStream(r,{mode:t.mode});e.on("error",t=>o(t)).on("open",()=>s.pipe(e)).once("close",()=>p(t,r,i,o))})}(t,e,r,i,o)}function p(t,e,r,i){n.chmod(e,t.mode,n=>n?i(n):r.preserveTimestamps?c(e,t.atime,t.mtime,i):i())}function y(t,e,r,i){n.readdir(t,(n,o)=>n?i(n):m(o,t,e,r,i))}function m(t,e,r,n,o){const s=t.pop();return s?function(t,e,r,n,o,s){const c=i.join(r,e),a=i.join(n,e);g(c,a,(e,i)=>{if(e)return s(e);l(i,c,a,o,e=>e?s(e):m(t,r,n,o,s))})}(t,s,e,r,n,o):o()}function b(t,e){const r=i.resolve(t).split(i.sep),n=i.resolve(e).split(i.sep);return r.reduce((t,e,r)=>t&&n[r]===e,!0)}function g(t,e,r){!function(t,e,r){n.stat(t,(t,i)=>{if(t)return r(t);n.stat(e,(t,e)=>t?"ENOENT"===t.code?r(null,{srcStat:i,destStat:a}):r(t):r(null,{srcStat:i,destStat:e}))})}(t,e,(n,i)=>{if(n)return r(n);const{srcStat:o,destStat:s}=i;return s.ino&&s.ino===o.ino?r(new Error("Source and destination must not be the same.")):o.isDirectory()&&b(t,e)?r(new Error(`Cannot copy '${t}' to a subdirectory of itself, '${e}'.`)):r(null,s)})}t.exports=function(t,e,r,n){"function"!=typeof r||n?"function"==typeof r&&(r={filter:r}):(n=r,r={}),n=n||function(){},(r=r||{}).clobber=!("clobber"in r)||!!r.clobber,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269"),g(t,e,(i,o)=>i?n(i):r.filter?f(u,o,t,e,r,n):u(o,t,e,r,n))}},function(t,e,r){"use strict";const n=r(2).fromCallback,i=r(7),o=r(0),s=r(3),c=r(10),a=n(function(t,e){e=e||function(){},i.readdir(t,(r,n)=>{if(r)return s.mkdirs(t,e);n=n.map(e=>o.join(t,e)),function t(){const r=n.pop();if(!r)return e();c.remove(r,r=>{if(r)return e(r);t()})}()})});function u(t){let e;try{e=i.readdirSync(t)}catch(e){return s.mkdirsSync(t)}e.forEach(e=>{e=o.join(t,e),c.removeSync(e)})}t.exports={emptyDirSync:u,emptydirSync:u,emptyDir:a,emptydir:a}},function(t,e,r){"use strict";const n=r(1),i=r(0),o=r(21),s="win32"===process.platform;function c(t){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(e=>{t[e]=t[e]||n[e],t[e+="Sync"]=t[e]||n[e]}),t.maxBusyTries=t.maxBusyTries||3}function a(t,e,r){let n=0;"function"==typeof e&&(r=e,e={}),o(t,"rimraf: missing path"),o.strictEqual(typeof t,"string","rimraf: path should be a string"),o.strictEqual(typeof r,"function","rimraf: callback function required"),o(e,"rimraf: invalid options argument provided"),o.strictEqual(typeof e,"object","rimraf: options should be object"),c(e),u(t,e,function i(o){if(o){if(("EBUSY"===o.code||"ENOTEMPTY"===o.code||"EPERM"===o.code)&&n<e.maxBusyTries){return n++,setTimeout(()=>u(t,e,i),100*n)}"ENOENT"===o.code&&(o=null)}r(o)})}function u(t,e,r){o(t),o(e),o("function"==typeof r),e.lstat(t,(n,i)=>n&&"ENOENT"===n.code?r(null):n&&"EPERM"===n.code&&s?f(t,e,n,r):i&&i.isDirectory()?h(t,e,n,r):void e.unlink(t,n=>{if(n){if("ENOENT"===n.code)return r(null);if("EPERM"===n.code)return s?f(t,e,n,r):h(t,e,n,r);if("EISDIR"===n.code)return h(t,e,n,r)}return r(n)}))}function f(t,e,r,n){o(t),o(e),o("function"==typeof n),r&&o(r instanceof Error),e.chmod(t,438,i=>{i?n("ENOENT"===i.code?null:r):e.stat(t,(i,o)=>{i?n("ENOENT"===i.code?null:r):o.isDirectory()?h(t,e,r,n):e.unlink(t,n)})})}function l(t,e,r){let n;o(t),o(e),r&&o(r instanceof Error);try{e.chmodSync(t,438)}catch(t){if("ENOENT"===t.code)return;throw r}try{n=e.statSync(t)}catch(t){if("ENOENT"===t.code)return;throw r}n.isDirectory()?p(t,e,r):e.unlinkSync(t)}function h(t,e,r,n){o(t),o(e),r&&o(r instanceof Error),o("function"==typeof n),e.rmdir(t,s=>{!s||"ENOTEMPTY"!==s.code&&"EEXIST"!==s.code&&"EPERM"!==s.code?s&&"ENOTDIR"===s.code?n(r):n(s):function(t,e,r){o(t),o(e),o("function"==typeof r),e.readdir(t,(n,o)=>{if(n)return r(n);let s,c=o.length;if(0===c)return e.rmdir(t,r);o.forEach(n=>{a(i.join(t,n),e,n=>{if(!s)return n?r(s=n):void(0==--c&&e.rmdir(t,r))})})})}(t,e,n)})}function d(t,e){let r;c(e=e||{}),o(t,"rimraf: missing path"),o.strictEqual(typeof t,"string","rimraf: path should be a string"),o(e,"rimraf: missing options"),o.strictEqual(typeof e,"object","rimraf: options should be object");try{r=e.lstatSync(t)}catch(r){if("ENOENT"===r.code)return;"EPERM"===r.code&&s&&l(t,e,r)}try{r&&r.isDirectory()?p(t,e,null):e.unlinkSync(t)}catch(r){if("ENOENT"===r.code)return;if("EPERM"===r.code)return s?l(t,e,r):p(t,e,r);if("EISDIR"!==r.code)throw r;p(t,e,r)}}function p(t,e,r){o(t),o(e),r&&o(r instanceof Error);try{e.rmdirSync(t)}catch(n){if("ENOTDIR"===n.code)throw r;if("ENOTEMPTY"===n.code||"EEXIST"===n.code||"EPERM"===n.code)!function(t,e){o(t),o(e),e.readdirSync(t).forEach(r=>d(i.join(t,r),e));const r=s?100:1;let n=0;for(;;){let i=!0;try{const o=e.rmdirSync(t,e);return i=!1,o}finally{if(++n<r&&i)continue}}}(t,e);else if("ENOENT"!==n.code)throw n}}t.exports=a,a.sync=d},function(t,e,r){"use strict";const n=r(62),i=r(63),o=r(64);t.exports={createFile:n.createFile,createFileSync:n.createFileSync,ensureFile:n.createFile,ensureFileSync:n.createFileSync,createLink:i.createLink,createLinkSync:i.createLinkSync,ensureLink:i.createLink,ensureLinkSync:i.createLinkSync,createSymlink:o.createSymlink,createSymlinkSync:o.createSymlinkSync,ensureSymlink:o.createSymlink,ensureSymlinkSync:o.createSymlinkSync}},function(t,e,r){"use strict";const n=r(2).fromCallback,i=r(0),o=r(1),s=r(3),c=r(4).pathExists;t.exports={createFile:n(function(t,e){function r(){o.writeFile(t,"",t=>{if(t)return e(t);e()})}o.stat(t,(n,o)=>{if(!n&&o.isFile())return e();const a=i.dirname(t);c(a,(t,n)=>t?e(t):n?r():void s.mkdirs(a,t=>{if(t)return e(t);r()}))})}),createFileSync:function(t){let e;try{e=o.statSync(t)}catch(t){}if(e&&e.isFile())return;const r=i.dirname(t);o.existsSync(r)||s.mkdirsSync(r),o.writeFileSync(t,"")}}},function(t,e,r){"use strict";const n=r(2).fromCallback,i=r(0),o=r(1),s=r(3),c=r(4).pathExists;t.exports={createLink:n(function(t,e,r){function n(t,e){o.link(t,e,t=>{if(t)return r(t);r(null)})}c(e,(a,u)=>a?r(a):u?r(null):void o.lstat(t,o=>{if(o)return o.message=o.message.replace("lstat","ensureLink"),r(o);const a=i.dirname(e);c(a,(i,o)=>i?r(i):o?n(t,e):void s.mkdirs(a,i=>{if(i)return r(i);n(t,e)}))}))}),createLinkSync:function(t,e){if(o.existsSync(e))return;try{o.lstatSync(t)}catch(t){throw t.message=t.message.replace("lstat","ensureLink"),t}const r=i.dirname(e);return o.existsSync(r)?o.linkSync(t,e):(s.mkdirsSync(r),o.linkSync(t,e))}}},function(t,e,r){"use strict";const n=r(2).fromCallback,i=r(0),o=r(1),s=r(3),c=s.mkdirs,a=s.mkdirsSync,u=r(65),f=u.symlinkPaths,l=u.symlinkPathsSync,h=r(66),d=h.symlinkType,p=h.symlinkTypeSync,y=r(4).pathExists;t.exports={createSymlink:n(function(t,e,r,n){n="function"==typeof r?r:n,r="function"!=typeof r&&r,y(e,(s,a)=>s?n(s):a?n(null):void f(t,e,(s,a)=>{if(s)return n(s);t=a.toDst,d(a.toCwd,r,(r,s)=>{if(r)return n(r);const a=i.dirname(e);y(a,(r,i)=>r?n(r):i?o.symlink(t,e,s,n):void c(a,r=>{if(r)return n(r);o.symlink(t,e,s,n)}))})}))}),createSymlinkSync:function(t,e,r){if(o.existsSync(e))return;const n=l(t,e);t=n.toDst,r=p(n.toCwd,r);const s=i.dirname(e);return o.existsSync(s)?o.symlinkSync(t,e,r):(a(s),o.symlinkSync(t,e,r))}}},function(t,e,r){"use strict";const n=r(0),i=r(1),o=r(4).pathExists;t.exports={symlinkPaths:function(t,e,r){if(n.isAbsolute(t))return i.lstat(t,e=>e?(e.message=e.message.replace("lstat","ensureSymlink"),r(e)):r(null,{toCwd:t,toDst:t}));{const s=n.dirname(e),c=n.join(s,t);return o(c,(e,o)=>e?r(e):o?r(null,{toCwd:c,toDst:t}):i.lstat(t,e=>e?(e.message=e.message.replace("lstat","ensureSymlink"),r(e)):r(null,{toCwd:t,toDst:n.relative(s,t)})))}},symlinkPathsSync:function(t,e){let r;if(n.isAbsolute(t)){if(!(r=i.existsSync(t)))throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}{const o=n.dirname(e),s=n.join(o,t);if(r=i.existsSync(s))return{toCwd:s,toDst:t};if(!(r=i.existsSync(t)))throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:n.relative(o,t)}}}}},function(t,e,r){"use strict";const n=r(1);t.exports={symlinkType:function(t,e,r){if(r="function"==typeof e?e:r,e="function"!=typeof e&&e)return r(null,e);n.lstat(t,(t,n)=>{if(t)return r(null,"file");e=n&&n.isDirectory()?"dir":"file",r(null,e)})},symlinkTypeSync:function(t,e){let r;if(e)return e;try{r=n.lstatSync(t)}catch(t){return"file"}return r&&r.isDirectory()?"dir":"file"}}},function(t,e,r){"use strict";const n=r(2).fromCallback,i=r(12);i.outputJson=n(r(69)),i.outputJsonSync=r(70),i.outputJSON=i.outputJson,i.outputJSONSync=i.outputJsonSync,i.writeJSON=i.writeJson,i.writeJSONSync=i.writeJsonSync,i.readJSON=i.readJson,i.readJSONSync=i.readJsonSync,t.exports=i},function(t,e,r){var n;try{n=r(1)}catch(t){n=r(7)}function i(t,e){var r,n="\n";return"object"==typeof e&&null!==e&&(e.spaces&&(r=e.spaces),e.EOL&&(n=e.EOL)),JSON.stringify(t,e?e.replacer:null,r).replace(/\n/g,n)+n}function o(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t=t.replace(/^\uFEFF/,"")}var s={readFile:function(t,e,r){null==r&&(r=e,e={}),"string"==typeof e&&(e={encoding:e});var i=(e=e||{}).fs||n,s=!0;"throws"in e&&(s=e.throws),i.readFile(t,e,function(n,i){if(n)return r(n);var c;i=o(i);try{c=JSON.parse(i,e?e.reviver:null)}catch(e){return s?(e.message=t+": "+e.message,r(e)):r(null,null)}r(null,c)})},readFileSync:function(t,e){"string"==typeof(e=e||{})&&(e={encoding:e});var r=e.fs||n,i=!0;"throws"in e&&(i=e.throws);try{var s=r.readFileSync(t,e);return s=o(s),JSON.parse(s,e.reviver)}catch(e){if(i)throw e.message=t+": "+e.message,e;return null}},writeFile:function(t,e,r,o){null==o&&(o=r,r={});var s=(r=r||{}).fs||n,c="";try{c=i(e,r)}catch(t){return void(o&&o(t,null))}s.writeFile(t,c,r,o)},writeFileSync:function(t,e,r){var o=(r=r||{}).fs||n,s=i(e,r);return o.writeFileSync(t,s,r)}};t.exports=s},function(t,e,r){"use strict";const n=r(0),i=r(3),o=r(4).pathExists,s=r(12);t.exports=function(t,e,r,c){"function"==typeof r&&(c=r,r={});const a=n.dirname(t);o(a,(n,o)=>n?c(n):o?s.writeJson(t,e,r,c):void i.mkdirs(a,n=>{if(n)return c(n);s.writeJson(t,e,r,c)}))}},function(t,e,r){"use strict";const n=r(1),i=r(0),o=r(3),s=r(12);t.exports=function(t,e,r){const c=i.dirname(t);n.existsSync(c)||o.mkdirsSync(c),s.writeJsonSync(t,e,r)}},function(t,e,r){"use strict";const n=r(1),i=r(0),o=r(22).copySync,s=r(10).removeSync,c=r(3).mkdirsSync,a=r(25);function u(t,e,r){return n.statSync(t).isDirectory()?function(t,e,r){const n={overwrite:!1};r?(s(e),i()):i();function i(){return o(t,e,n),s(t)}}(t,e,r):function(t,e,r){const i=a(65536),o=r?"w":"wx",s=n.openSync(t,"r"),c=n.fstatSync(s),u=n.openSync(e,o,c.mode);let f=0;for(;f<c.size;){const t=n.readSync(s,i,0,65536,f);n.writeSync(u,i,0,t),f+=t}return n.closeSync(s),n.closeSync(u),n.unlinkSync(t)}(t,e,r)}t.exports={moveSync:function t(e,r,o){const a=(o=o||{}).overwrite||o.clobber||!1;if(e=i.resolve(e),r=i.resolve(r),e===r)return n.accessSync(e);if(function(t,e){try{return n.statSync(t).isDirectory()&&t!==e&&e.indexOf(t)>-1&&e.split(i.dirname(t)+i.sep)[1].split(i.sep)[0]===i.basename(t)}catch(t){return!1}}(e,r))throw new Error(`Cannot move '${e}' into itself '${r}'.`);c(i.dirname(r)),function(){if(a)try{n.renameSync(e,r)}catch(n){if("ENOTEMPTY"===n.code||"EEXIST"===n.code||"EPERM"===n.code)return s(r),o.overwrite=!1,t(e,r,o);if("EXDEV"!==n.code)throw n;return u(e,r,a)}else try{n.linkSync(e,r),n.unlinkSync(e)}catch(t){if("EXDEV"===t.code||"EISDIR"===t.code||"EPERM"===t.code||"ENOTSUP"===t.code)return u(e,r,a);throw t}}()}}},function(t,e,r){"use strict";const n=r(2).fromCallback,i=r(1),o=r(0),s=r(26).copy,c=r(10).remove,a=r(3).mkdirp,u=r(4).pathExists;function f(t,e,r,n){i.rename(t,e,i=>i?"EXDEV"!==i.code?n(i):function(t,e,r,n){s(t,e,{overwrite:r,errorOnExist:!0},e=>e?n(e):c(t,n))}(t,e,r,n):n())}t.exports={move:n(function(t,e,r,n){"function"==typeof r&&(n=r,r={});const s=r.overwrite||r.clobber||!1;if(t=o.resolve(t),e=o.resolve(e),t===e)return i.access(t,n);i.stat(t,(r,i)=>r?n(r):i.isDirectory()&&function(t,e){const r=t.split(o.sep),n=e.split(o.sep);return r.reduce((t,e,r)=>t&&n[r]===e,!0)}(t,e)?n(new Error(`Cannot move '${t}' to a subdirectory of itself, '${e}'.`)):void a(o.dirname(e),r=>r?n(r):function(t,e,r,n){if(r)return c(e,i=>i?n(i):f(t,e,r,n));u(e,(i,o)=>i?n(i):o?n(new Error("dest already exists.")):f(t,e,r,n))}(t,e,s,n)))})}},function(t,e,r){"use strict";const n=r(2).fromCallback,i=r(1),o=r(0),s=r(3),c=r(4).pathExists;t.exports={outputFile:n(function(t,e,r,n){"function"==typeof r&&(n=r,r="utf8");const a=o.dirname(t);c(a,(o,c)=>o?n(o):c?i.writeFile(t,e,r,n):void s.mkdirs(a,o=>{if(o)return n(o);i.writeFile(t,e,r,n)}))}),outputFileSync:function(t,...e){const r=o.dirname(t);if(i.existsSync(r))return i.writeFileSync(t,...e);s.mkdirsSync(r),i.writeFileSync(t,...e)}}},function(t,e,r){t.exports=r(75)},function(t,e){function r(t,e){if(this.stream=e.stream||process.stderr,"number"==typeof e){var r=e;(e={}).total=r}else{if(e=e||{},"string"!=typeof t)throw new Error("format required");if("number"!=typeof e.total)throw new Error("total required")}this.fmt=t,this.curr=0,this.total=e.total,this.width=e.width||this.total,this.clear=e.clear,this.chars={complete:e.complete||"=",incomplete:e.incomplete||"-"},this.callback=e.callback||function(){},this.lastDraw=""}
/*!
 * node-progress
 * Copyright(c) 2011 TJ Holowaychuk <tj@vision-media.ca>
 * MIT Licensed
 */
t.exports=r,r.prototype.tick=function(t,e){if(0!==t&&(t=t||1),"object"==typeof t&&(e=t,t=1),0==this.curr&&(this.start=new Date),this.curr+=t,this.render(e),this.curr>=this.total)return this.complete=!0,this.terminate(),void this.callback(this)},r.prototype.render=function(t){if(this.stream.isTTY){var e,r,n,i=this.curr/this.total,o=100*(i=Math.min(Math.max(i,0),1)),s=new Date-this.start,c=100==o?0:s*(this.total/this.curr-1),a=this.fmt.replace(":current",this.curr).replace(":total",this.total).replace(":elapsed",isNaN(s)?"0.0":(s/1e3).toFixed(1)).replace(":eta",isNaN(c)||!isFinite(c)?"0.0":(c/1e3).toFixed(1)).replace(":percent",o.toFixed(0)+"%"),u=Math.max(0,this.stream.columns-a.replace(":bar","").length),f=Math.min(this.width,u);if(n=Math.round(f*i),r=Array(n+1).join(this.chars.complete),e=Array(f-n+1).join(this.chars.incomplete),a=a.replace(":bar",r+e),t)for(var l in t)a=a.replace(":"+l,t[l]);this.lastDraw!==a&&(this.stream.clearLine(),this.stream.cursorTo(0),this.stream.write(a),this.lastDraw=a)}},r.prototype.update=function(t,e){var r=Math.floor(t*this.total)-this.curr;this.tick(r,e)},r.prototype.terminate=function(){this.clear?(this.stream.clearLine(),this.stream.cursorTo(0)):console.log()}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n={INVALID_ENCODING:"Invalid encoding provided. Please specify a valid encoding the internal Node.js Buffer supports.",INVALID_SMARTBUFFER_SIZE:"Invalid size provided. Size must be a valid integer greater than zero.",INVALID_SMARTBUFFER_BUFFER:"Invalid Buffer provided in SmartBufferOptions.",INVALID_SMARTBUFFER_OBJECT:"Invalid SmartBufferOptions object supplied to SmartBuffer constructor or factory methods.",INVALID_OFFSET:"An invalid offset value was provided.",INVALID_OFFSET_NON_NUMBER:"An invalid offset value was provided. A numeric value is required.",INVALID_LENGTH:"An invalid length value was provided.",INVALID_LENGTH_NON_NUMBER:"An invalid length value was provived. A numeric value is required.",INVALID_TARGET_OFFSET:"Target offset is beyond the bounds of the internal SmartBuffer data.",INVALID_TARGET_LENGTH:"Specified length value moves cursor beyong the bounds of the internal SmartBuffer data.",INVALID_READ_BEYOND_BOUNDS:"Attempted to read beyond the bounds of the managed data.",INVALID_WRITE_BEYOND_BOUNDS:"Attempted to write beyond the bounds of the managed data."};function i(t){return"number"==typeof t&&isFinite(t)&&function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}(t)}function o(t,e){if("number"!=typeof t)throw new Error(e?n.INVALID_OFFSET_NON_NUMBER:n.INVALID_LENGTH_NON_NUMBER);if(!i(t)||t<0)throw new Error(e?n.INVALID_OFFSET:n.INVALID_LENGTH)}e.ERRORS=n,e.checkEncoding=function(t){if(!Buffer.isEncoding(t))throw new Error(n.INVALID_ENCODING)},e.isFiniteInteger=i,e.checkLengthValue=function(t){o(t,!1)},e.checkOffsetValue=function(t){o(t,!0)},e.checkTargetOffset=function(t,e){if(t<0||t>e.length)throw new Error(n.INVALID_TARGET_OFFSET)}},function(t,e,r){var n,i,o;!function(r,s){"use strict";"object"==typeof t.exports?t.exports=s():(i=[],void 0===(o="function"==typeof(n=s)?n.apply(e,i):n)||(t.exports=o))}(0,function(){"use strict";var t=Object.prototype.toString;function e(t,e){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)}function r(t){if(!t)return!0;if(i(t)&&0===t.length)return!0;if("string"!=typeof t){for(var r in t)if(e(t,r))return!1;return!0}return!1}function n(e){return t.call(e)}var i=Array.isArray||function(e){return"[object Array]"===t.call(e)};function o(t){var e=parseInt(t);return e.toString()===t?e:t}function s(t){t=t||{};var s=function(t){return Object.keys(s).reduce(function(e,r){return"create"===r?e:("function"==typeof s[r]&&(e[r]=s[r].bind(s,t)),e)},{})};function c(r,n){return t.includeInheritedProps||"number"==typeof n&&Array.isArray(r)||e(r,n)}function a(t,e){if(c(t,e))return t[e]}function u(t,e,r,n){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if("string"==typeof e)return u(t,e.split(".").map(o),r,n);var i=e[0],s=a(t,i);return 1===e.length?(void 0!==s&&n||(t[i]=r),s):(void 0===s&&("number"==typeof e[1]?t[i]=[]:t[i]={}),u(t[i],e.slice(1),r,n))}return s.has=function(r,n){if("number"==typeof n?n=[n]:"string"==typeof n&&(n=n.split(".")),!n||0===n.length)return!!r;for(var s=0;s<n.length;s++){var c=o(n[s]);if(!("number"==typeof c&&i(r)&&c<r.length||(t.includeInheritedProps?c in Object(r):e(r,c))))return!1;r=r[c]}return!0},s.ensureExists=function(t,e,r){return u(t,e,r,!0)},s.set=function(t,e,r,n){return u(t,e,r,n)},s.insert=function(t,e,r,n){var o=s.get(t,e);n=~~n,i(o)||(o=[],s.set(t,e,o)),o.splice(n,0,r)},s.empty=function(t,e){var o,a;if(!r(e)&&(null!=t&&(o=s.get(t,e)))){if("string"==typeof o)return s.set(t,e,"");if(function(t){return"boolean"==typeof t||"[object Boolean]"===n(t)}(o))return s.set(t,e,!1);if("number"==typeof o)return s.set(t,e,0);if(i(o))o.length=0;else{if(!function(t){return"object"==typeof t&&"[object Object]"===n(t)}(o))return s.set(t,e,null);for(a in o)c(o,a)&&delete o[a]}}},s.push=function(t,e){var r=s.get(t,e);i(r)||(r=[],s.set(t,e,r)),r.push.apply(r,Array.prototype.slice.call(arguments,2))},s.coalesce=function(t,e,r){for(var n,i=0,o=e.length;i<o;i++)if(void 0!==(n=s.get(t,e[i])))return n;return r},s.get=function(t,e,r){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if(null==t)return r;if("string"==typeof e)return s.get(t,e.split("."),r);var n=o(e[0]),i=a(t,n);return void 0===i?r:1===e.length?i:s.get(t[n],e.slice(1),r)},s.del=function(t,e){if("number"==typeof e&&(e=[e]),null==t)return t;if(r(e))return t;if("string"==typeof e)return s.del(t,e.split("."));var n=o(e[0]);return c(t,n)?1!==e.length?s.del(t[n],e.slice(1)):(i(t)?t.splice(n,1):delete t[n],t):t},s}var c=s();return c.create=s,c.withInheritedProps=s({includeInheritedProps:!0}),c})},function(t,e,r){const n=r(79),i=r(80),o=r(18),s=r(8),c={getRelativePath:function(t,e){return/^(?:http|blob|data:|\/)/.test(e)?e:s.resolve(t,e)},each:function(t,e){t&&(Array.isArray(t)?t.forEach(e):Object.keys(t).forEach(r=>{e(t[r],r)}))},getBuffer:function(t){if(/^https?:/.test(t)){console.log("downloading file",t);var e=Date.now();return i(t).then(t=>t.buffer().then(t=>{var r=n(t.length,{spacer:""});return console.log(`download success, size: ${r}, time: ${Date.now()-e}ms`),t})).catch(t=>console.log("download failed",t))}if(/^data:/.test(t)){const e=Buffer.from(t.replace(/^data:(.+?);base64,/i,""),"base64");return new Uint8Array(e)}return o.readFile(t)},addExtensions:function(t,e,r){if("All"===t)return c.addExtensions("Used",e,r),void c.addExtensions("Required",e,r);e[t="extensions"+(t||"Used")]=e[t]||[],-1===e[t].indexOf(r)&&e[t].push(r)}};t.exports=c},function(t,e,r){"use strict";
/**
 * filesize
 *
 * @copyright 2018 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 3.6.1
 */
/**
 * filesize
 *
 * @copyright 2018 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 3.6.1
 */
!function(e){var r=/^(b|B)$/,n={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},i={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]};function o(t){var e,o,s,c,a,u,f,l,h,d,p,y,m,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},g=[],w=0,v=void 0,E=void 0;if(isNaN(t))throw new Error("Invalid arguments");return o=!0===b.bits,h=!0===b.unix,e=b.base||2,l=void 0!==b.round?b.round:h?1:2,d=void 0!==b.separator&&b.separator||"",p=void 0!==b.spacer?b.spacer:h?"":" ",m=b.symbols||b.suffixes||{},y=2===e&&b.standard||"jedec",f=b.output||"string",c=!0===b.fullform,a=b.fullforms instanceof Array?b.fullforms:[],v=void 0!==b.exponent?b.exponent:-1,s=e>2?1e3:1024,(u=(E=Number(t))<0)&&(E=-E),(-1===v||isNaN(v))&&(v=Math.floor(Math.log(E)/Math.log(s)))<0&&(v=0),v>8&&(v=8),0===E?(g[0]=0,g[1]=h?"":n[y][o?"bits":"bytes"][v]):(w=E/(2===e?Math.pow(2,10*v):Math.pow(1e3,v)),o&&(w*=8)>=s&&v<8&&(w/=s,v++),g[0]=Number(w.toFixed(v>0?l:0)),g[1]=10===e&&1===v?o?"kb":"kB":n[y][o?"bits":"bytes"][v],h&&(g[1]="jedec"===y?g[1].charAt(0):v>0?g[1].replace(/B$/,""):g[1],r.test(g[1])&&(g[0]=Math.floor(g[0]),g[1]=""))),u&&(g[0]=-g[0]),g[1]=m[g[1]]||g[1],"array"===f?g:"exponent"===f?v:"object"===f?{value:g[0],suffix:g[1],symbol:g[1]}:(c&&(g[1]=a[v]?a[v]:i[y][v]+(o?"bit":"byte")+(1===g[0]?"":"s")),d.length>0&&(g[0]=g[0].toString().replace(".",d)),g.join(p))}o.partial=function(t){return function(e){return o(e,t)}},t.exports=o}("undefined"!=typeof window?window:global)},function(t,e,r){"use strict";r.r(e),r.d(e,"Headers",function(){return _}),r.d(e,"Request",function(){return V}),r.d(e,"Response",function(){return B}),r.d(e,"FetchError",function(){return s});const n=Symbol("buffer"),i=Symbol("type");class o{constructor(){this[i]="";const t=arguments[0],e=arguments[1],r=[];if(t){const e=t,i=Number(e.length);for(let t=0;t<i;t++){const i=e[t];let s;s=i instanceof Buffer?i:ArrayBuffer.isView(i)?Buffer.from(i.buffer,i.byteOffset,i.byteLength):i instanceof ArrayBuffer?Buffer.from(i):i instanceof o?i[n]:Buffer.from("string"==typeof i?i:String(i)),r.push(s)}}this[n]=Buffer.concat(r);let s=e&&void 0!==e.type&&String(e.type).toLowerCase();s&&!/[^\u0020-\u007E]/.test(s)&&(this[i]=s)}get size(){return this[n].length}get type(){return this[i]}slice(){const t=this.size,e=arguments[0],r=arguments[1];let i,s;i=void 0===e?0:e<0?Math.max(t+e,0):Math.min(e,t),s=void 0===r?t:r<0?Math.max(t+r,0):Math.min(r,t);const c=Math.max(s-i,0),a=this[n].slice(i,i+c),u=new o([],{type:arguments[2]});return u[n]=a,u}}function s(t,e,r){Error.call(this,t),this.message=t,this.type=e,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}Object.defineProperties(o.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(o.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),s.prototype=Object.create(Error.prototype),s.prototype.constructor=s,s.prototype.name="FetchError";const c=r(9);const a=r(9).PassThrough;let u;try{u=r(!function(){var t=new Error("Cannot find module 'encoding'");throw t.code="MODULE_NOT_FOUND",t}()).convert}catch(t){}const f=Symbol("Body internals");function l(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.size;let i=void 0===n?0:n;var a=r.timeout;let u=void 0===a?0:a;null==t?t=null:"string"==typeof t||d(t)||t instanceof o||Buffer.isBuffer(t)||"[object ArrayBuffer]"===Object.prototype.toString.call(t)||t instanceof c||(t=String(t)),this[f]={body:t,disturbed:!1,error:null},this.size=i,this.timeout=u,t instanceof c&&t.on("error",function(t){e[f].error=new s(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t)})}function h(){var t=this;if(this[f].disturbed)return l.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[f].disturbed=!0,this[f].error)return l.Promise.reject(this[f].error);if(null===this.body)return l.Promise.resolve(Buffer.alloc(0));if("string"==typeof this.body)return l.Promise.resolve(Buffer.from(this.body));if(this.body instanceof o)return l.Promise.resolve(this.body[n]);if(Buffer.isBuffer(this.body))return l.Promise.resolve(this.body);if("[object ArrayBuffer]"===Object.prototype.toString.call(this.body))return l.Promise.resolve(Buffer.from(this.body));if(!(this.body instanceof c))return l.Promise.resolve(Buffer.alloc(0));let e=[],r=0,i=!1;return new l.Promise(function(n,o){let c;t.timeout&&(c=setTimeout(function(){i=!0,o(new s(`Response timeout while trying to fetch ${t.url} (over ${t.timeout}ms)`,"body-timeout"))},t.timeout)),t.body.on("error",function(e){o(new s(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,"system",e))}),t.body.on("data",function(n){if(!i&&null!==n){if(t.size&&r+n.length>t.size)return i=!0,void o(new s(`content size at ${t.url} over limit: ${t.size}`,"max-size"));r+=n.length,e.push(n)}}),t.body.on("end",function(){if(!i){clearTimeout(c);try{n(Buffer.concat(e))}catch(e){o(new s(`Could not create Buffer from response body for ${t.url}: ${e.message}`,"system",e))}}})})}function d(t){return"object"==typeof t&&"function"==typeof t.append&&"function"==typeof t.delete&&"function"==typeof t.get&&"function"==typeof t.getAll&&"function"==typeof t.has&&"function"==typeof t.set&&("URLSearchParams"===t.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(t)||"function"==typeof t.sort)}function p(t){let e,r,n=t.body;if(t.bodyUsed)throw new Error("cannot clone body after it is used");return n instanceof c&&"function"!=typeof n.getBoundary&&(e=new a,r=new a,n.pipe(e),n.pipe(r),t[f].body=e,n=r),n}function y(t){const e=t.body;return null===e?0:"string"==typeof e?Buffer.byteLength(e):d(e)?Buffer.byteLength(String(e)):e instanceof o?e.size:Buffer.isBuffer(e)?e.length:"[object ArrayBuffer]"===Object.prototype.toString.call(e)?e.byteLength:e&&"function"==typeof e.getLengthSync&&(e._lengthRetrievers&&0==e._lengthRetrievers.length||e.hasKnownLength&&e.hasKnownLength())?e.getLengthSync():null}l.prototype={get body(){return this[f].body},get bodyUsed(){return this[f].disturbed},arrayBuffer(){return h.call(this).then(function(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)})},blob(){let t=this.headers&&this.headers.get("content-type")||"";return h.call(this).then(function(e){return Object.assign(new o([],{type:t.toLowerCase()}),{[n]:e})})},json(){var t=this;return h.call(this).then(function(e){try{return JSON.parse(e.toString())}catch(e){return l.Promise.reject(new s(`invalid json response body at ${t.url} reason: ${e.message}`,"invalid-json"))}})},text(){return h.call(this).then(function(t){return t.toString()})},buffer(){return h.call(this)},textConverted(){var t=this;return h.call(this).then(function(e){return function(t,e){if("function"!=typeof u)throw new Error("The package `encoding` must be installed to use the textConverted() function");const r=e.get("content-type");let n,i,o="utf-8";r&&(n=/charset=([^;]*)/i.exec(r));i=t.slice(0,1024).toString(),!n&&i&&(n=/<meta.+?charset=(['"])(.+?)\1/i.exec(i));!n&&i&&(n=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(i))&&(n=/charset=(.*)/i.exec(n.pop()));!n&&i&&(n=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(i));n&&("gb2312"!==(o=n.pop())&&"gbk"!==o||(o="gb18030"));return u(t,"UTF-8",o).toString()}(e,t.headers)})}},Object.defineProperties(l.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),l.mixIn=function(t){for(const e of Object.getOwnPropertyNames(l.prototype))if(!(e in t)){const r=Object.getOwnPropertyDescriptor(l.prototype,e);Object.defineProperty(t,e,r)}},l.Promise=global.Promise;const m=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,b=/[^\t\x20-\x7e\x80-\xff]/;function g(t){if(t=`${t}`,m.test(t))throw new TypeError(`${t} is not a legal HTTP header name`)}function w(t){if(t=`${t}`,b.test(t))throw new TypeError(`${t} is not a legal HTTP header value`)}function v(t,e){e=e.toLowerCase();for(const r in t)if(r.toLowerCase()===e)return r}const E=Symbol("map");class _{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[E]=Object.create(null),t instanceof _){const e=t.raw(),r=Object.keys(e);for(const t of r)for(const r of e[t])this.append(t,r)}else if(null==t);else{if("object"!=typeof t)throw new TypeError("Provided initializer must be an object");{const e=t[Symbol.iterator];if(null!=e){if("function"!=typeof e)throw new TypeError("Header pairs must be iterable");const r=[];for(const e of t){if("object"!=typeof e||"function"!=typeof e[Symbol.iterator])throw new TypeError("Each header pair must be iterable");r.push(Array.from(e))}for(const t of r){if(2!==t.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(t[0],t[1])}}else for(const e of Object.keys(t)){const r=t[e];this.append(e,r)}}}}get(t){g(t=`${t}`);const e=v(this[E],t);return void 0===e?null:this[E][e].join(", ")}forEach(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=S(this),n=0;for(;n<r.length;){var i=r[n];const o=i[0],s=i[1];t.call(e,s,o,this),r=S(this),n++}}set(t,e){e=`${e}`,g(t=`${t}`),w(e);const r=v(this[E],t);this[E][void 0!==r?r:t]=[e]}append(t,e){e=`${e}`,g(t=`${t}`),w(e);const r=v(this[E],t);void 0!==r?this[E][r].push(e):this[E][t]=[e]}has(t){return g(t=`${t}`),void 0!==v(this[E],t)}delete(t){g(t=`${t}`);const e=v(this[E],t);void 0!==e&&delete this[E][e]}raw(){return this[E]}keys(){return x(this,"key")}values(){return x(this,"value")}[Symbol.iterator](){return x(this,"key+value")}}function S(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";return Object.keys(t[E]).sort().map("key"===e?function(t){return t.toLowerCase()}:"value"===e?function(e){return t[E][e].join(", ")}:function(e){return[e.toLowerCase(),t[E][e].join(", ")]})}_.prototype.entries=_.prototype[Symbol.iterator],Object.defineProperty(_.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(_.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const O=Symbol("internal");function x(t,e){const r=Object.create(C);return r[O]={target:t,kind:e,index:0},r}const C=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==C)throw new TypeError("Value of `this` is not a HeadersIterator");var t=this[O];const e=t.target,r=t.kind,n=t.index,i=S(e,r);return n>=i.length?{value:void 0,done:!0}:(this[O].index=n+1,{value:i[n],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function I(t){const e=Object.assign({__proto__:null},t[E]),r=v(t[E],"Host");return void 0!==r&&(e[r]=e[r][0]),e}Object.defineProperty(C,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const T=r(27).STATUS_CODES,N=Symbol("Response internals");class B{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l.call(this,t,e);const r=e.status||200;this[N]={url:e.url,status:r,statusText:e.statusText||T[r],headers:new _(e.headers)}}get url(){return this[N].url}get status(){return this[N].status}get ok(){return this[N].status>=200&&this[N].status<300}get statusText(){return this[N].statusText}get headers(){return this[N].headers}clone(){return new B(p(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok})}}l.mixIn(B.prototype),Object.defineProperties(B.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(B.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});var L=r(8);const F=L.format,A=L.parse,k=Symbol("Request internals");function R(t){return"object"==typeof t&&"object"==typeof t[k]}class V{constructor(t){let e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};R(t)?e=A(t.url):(e=t&&t.href?A(t.href):A(`${t}`),t={});let n=r.method||t.method||"GET";if(n=n.toUpperCase(),(null!=r.body||R(t)&&null!==t.body)&&("GET"===n||"HEAD"===n))throw new TypeError("Request with GET/HEAD method cannot have body");let i=null!=r.body?r.body:R(t)&&null!==t.body?p(t):null;l.call(this,i,{timeout:r.timeout||t.timeout||0,size:r.size||t.size||0});const s=new _(r.headers||t.headers||{});if(null!=r.body){const t=function(t){const e=t.body;return null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":d(e)?"application/x-www-form-urlencoded;charset=UTF-8":e instanceof o?e.type||null:Buffer.isBuffer(e)?null:"[object ArrayBuffer]"===Object.prototype.toString.call(e)?null:"function"==typeof e.getBoundary?`multipart/form-data;boundary=${e.getBoundary()}`:null}(this);null===t||s.has("Content-Type")||s.append("Content-Type",t)}this[k]={method:n,redirect:r.redirect||t.redirect||"follow",headers:s,parsedURL:e},this.follow=void 0!==r.follow?r.follow:void 0!==t.follow?t.follow:20,this.compress=void 0!==r.compress?r.compress:void 0===t.compress||t.compress,this.counter=r.counter||t.counter||0,this.agent=r.agent||t.agent}get method(){return this[k].method}get url(){return F(this[k].parsedURL)}get headers(){return this[k].headers}get redirect(){return this[k].redirect}clone(){return new V(this)}}l.mixIn(V.prototype),Object.defineProperty(V.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(V.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0}});const M=r(27),D=r(81);const U=r(9).PassThrough;const P=r(8).resolve,j=r(82);function z(t,e){if(!z.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return l.Promise=z.Promise,new z.Promise(function(r,i){const c=new V(t,e),a=function(t){const e=t[k].parsedURL,r=new _(t[k].headers);if(r.has("Accept")||r.set("Accept","*/*"),!e.protocol||!e.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(e.protocol))throw new TypeError("Only HTTP(S) protocols are supported");let n=null;if(null==t.body&&/^(POST|PUT)$/i.test(t.method)&&(n="0"),null!=t.body){const e=y(t);"number"==typeof e&&(n=String(e))}return n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),t.compress&&r.set("Accept-Encoding","gzip,deflate"),r.has("Connection")||t.agent||r.set("Connection","close"),Object.assign({},e,{method:t.method,headers:I(r),agent:t.agent})}(c),u=(0,("https:"===a.protocol?D:M).request)(a);let f;function l(){u.abort(),clearTimeout(f)}c.timeout&&u.once("socket",function(t){f=setTimeout(function(){i(new s(`network timeout at: ${c.url}`,"request-timeout")),l()},c.timeout)}),u.on("error",function(t){i(new s(`request to ${c.url} failed, reason: ${t.message}`,"system",t)),l()}),u.on("response",function(t){clearTimeout(f);const e=function(t){const e=new _;for(const r of Object.keys(t))if(!m.test(r))if(Array.isArray(t[r]))for(const n of t[r])b.test(n)||(void 0===e[E][r]?e[E][r]=[n]:e[E][r].push(n));else b.test(t[r])||(e[E][r]=[t[r]]);return e}(t.headers);if(z.isRedirect(t.statusCode)){const n=e.get("Location"),o=null===n?null:P(c.url,n);switch(c.redirect){case"error":return i(new s(`redirect mode is set to error: ${c.url}`,"no-redirect")),void l();case"manual":null!==o&&e.set("Location",o);break;case"follow":if(null===o)break;if(c.counter>=c.follow)return i(new s(`maximum redirect reached at: ${c.url}`,"max-redirect")),void l();const n={headers:new _(c.headers),follow:c.follow,counter:c.counter+1,agent:c.agent,compress:c.compress,method:c.method,body:c.body};return 303!==t.statusCode&&c.body&&null===y(c)?(i(new s("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void l()):(303!==t.statusCode&&(301!==t.statusCode&&302!==t.statusCode||"POST"!==c.method)||(n.method="GET",n.body=void 0,n.headers.delete("content-length")),r(z(new V(o,n))),void l())}}let n=t.pipe(new U);const o={url:c.url,status:t.statusCode,statusText:t.statusMessage,headers:e,size:c.size,timeout:c.timeout},a=e.get("Content-Encoding");if(!c.compress||"HEAD"===c.method||null===a||204===t.statusCode||304===t.statusCode)return void r(new B(n,o));const u={flush:j.Z_SYNC_FLUSH,finishFlush:j.Z_SYNC_FLUSH};if("gzip"==a||"x-gzip"==a)return n=n.pipe(j.createGunzip(u)),void r(new B(n,o));if("deflate"!=a&&"x-deflate"!=a)r(new B(n,o));else{t.pipe(new U).once("data",function(t){n=8==(15&t[0])?n.pipe(j.createInflate()):n.pipe(j.createInflateRaw()),r(new B(n,o))})}}),function(t,e){const r=e.body;null===r?t.end():"string"==typeof r?(t.write(r),t.end()):d(r)?(t.write(Buffer.from(String(r))),t.end()):r instanceof o?(t.write(r[n]),t.end()):Buffer.isBuffer(r)?(t.write(r),t.end()):"[object ArrayBuffer]"===Object.prototype.toString.call(r)?(t.write(Buffer.from(r)),t.end()):r.pipe(t)}(u,c)})}z.isRedirect=function(t){return 301===t||302===t||303===t||307===t||308===t},z.default=z,z.Promise=global.Promise,e.default=z},function(t,e){t.exports=require("https")},function(t,e){t.exports=require("zlib")},function(t,e,r){const n=r(84),i=r(92),o=r(6);t.exports={Geometry:o,AMCompression:n,AMDecompression:i}},function(t,e,r){const n=r(13).SmartBuffer,i=r(85),o=r(91),s={EB:0},c=[i],a=[o];function u(t,e={}){const r=e.type||s.EB,n=new c[r](t,e).compress();return n.type=r,n}t.exports={Type:s,compress:u,compressToBuffer:function(t,e,r={}){t||(t=new n);const i=u(e,r);return function(t,e,r){return t.writeUInt8("A".charCodeAt(0)),t.writeUInt8("M".charCodeAt(0)),t.writeUInt8("C".charCodeAt(0)),t.writeUInt8(this.type),a[r].write(e,t),t}(t,i,i.type)}}},function(t,e,r){const n=r(6),i=r(86),o=r(87),s=r(14);t.exports=class{constructor(t,e={}){this.geometry=t,this.indices=t.indices,this.noParallelogramPrediction=!!e.noParallelogramPrediction,this.vertexCount=t.getAttrLength(),this.faceCount=this.indices.length/3,this.visitedVertexMap=new Array(this.vertexCount),this.visitedFaceMap=new Array(this.faceCount),t.quantize(e.quantization),this.faceCount>100&&this.vertexCount>this.faceCount&&o(t),this.ct=new i(this.indices,{onFaceDelete:t=>{this.visitedFaceMap[t]=1}}),this.fixNonManifold(),this.initBoundaryLoops()}fixNonManifold(){const t=this.ct,e=this.nonManifoldMap={};var r=this.indices;const n=r.length,i=[];for(var o=0;o<n;o++){var s=r[o];if(i[s]){const n=i[s];for(var c=n.length-1;c>=0;c--)if(t.isCornerCanReach(n[c],o)){r[o]=r[n[c]];break}c<0&&(e[this.vertexCount]=s,i[s].push(o),this.vertexCount>65535&&r instanceof Uint16Array&&(this.indices=new Uint32Array(r),this.geometry.indices=this.indices,r=this.indices),r[o]=this.vertexCount++)}else i[s]=[o]}}initBoundaryLoops(){const t=this.ct,e=this.indices,r=e.length,n=this.boundaryVertexMap=new Uint8Array(this.vertexCount),i=new Uint8Array(r),o=this.boundaryLoops=[];for(var s=0;s<r;s++)if(-1===t.oppositeCorner(s)&&!i[s]){i[s]=1;var c=[],a=t.prevCorner(s),u=a;do{c.push(u),n[e[u]]=1,i[t.nextCorner(u)]=1;var f=t.leftmostCorner(u);u=t.nextCorner(f)}while(u!==a);o.push(c)}}getBoundaryLoop(t){const e=this.ct,r=this.indices,n=r[t];var i;const o=e.leftmostCorner(t);if(o>=0&&o!==t)i=r[e.nextCorner(o)];else{var s=e.rightmostCorner(t);i=r[e.prevCorner(s)]}for(var c={},a=this.boundaryLoops.length-1;a>=0;a--)for(var u=this.boundaryLoops[a],f=u.length,l=f;l>=0;l--)if(r[u[l]]===n&&(c.boundaryLoop=u,c.index=l,r[u[(l+1)%f]]===i||r[u[0===l?f-1:l-1]]===i))return c;return c}isFaceVisited(t){return!!(t<0||this.visitedFaceMap[t])}isVertexVisited(t){return!!(t<0||this.visitedVertexMap[t])}isVertexOnBoundary(t){return!!this.boundaryVertexMap[t]}isCornerOnBoundary(t){return this.isVertexOnBoundary(this.indices[t])}compressFromCorner(t,e){const r=this.ct;if(this.isFaceVisited(r.cornerToFace(t)))return;const n=t,i=this.indices,o=this.visitedFaceMap,c=this.visitedVertexMap;var a=r.nextCorner(t),u=r.nextCorner(a),f=i[a],l=i[u];this.writeVertex(u),this.isVertexVisited(l)||(this.currentVertex++,c[l]=this.currentVertex+1),this.writeVertex(a),this.isVertexVisited(f)||(this.currentVertex++,c[f]=this.currentVertex+1);const h=[];for(h.length=0,h.push(t);h.length;)if(!((t=h.pop())<0||this.isFaceVisited(r.cornerToFace(t))))for(;;){this.currentFace++;var d=r.cornerToFace(t);o[d]=1;var p=3*this.currentFace,y=i[t],m=r.rightCorner(t),b=r.cornerToFace(m),g=r.leftCorner(t),w=r.cornerToFace(g);if(o[b]>1){var v=r.cornerToFace(o[b]);e.handles.push(p+1,v)}if(o[w]>1){v=r.cornerToFace(o[w]);e.handles.push(p+2,v)}const a=t===n?-1:r.oppositeCorner(t);if(this.writeVertex(t,a),c[y])if(this.isFaceVisited(b)){if(this.isFaceVisited(w)){e.clers.push(s.E),this._onCompressFace(d,this.currentFace,s.E);break}e.clers.push(s.R),this._onCompressFace(d,this.currentFace,s.R),t=g}else{if(!this.isFaceVisited(w)){o[d]=p+2,e.clers.push(s.S),this._onCompressFace(d,this.currentFace,s.S),h.push(g),h.push(m);break}e.clers.push(s.L),this._onCompressFace(d,this.currentFace,s.L),t=m}else{if(this.currentVertex++,c[y]=this.currentVertex+1,this.isVertexOnBoundary(y)){e.clers.push(s.M),this._onCompressFace(d,this.currentFace,s.M);var E=this.getBoundaryLoop(t),_=E.boundaryLoop;e.holes.push(_.length);var S=E.index,O=S;do{if(++O===_.length){if(0===S)break;O=0}var x=i[_[O]];this.currentVertex++,this.accessedMap[x]?this.handlerDuplicateVertexInOneLoop(_[O],this.currentVertex+1):(this.accessedMap[x]=1,c[x]=this.currentVertex+1)}while(O!==S-1);t=m;continue}e.clers.push(s.C),this._onCompressFace(d,this.currentFace,s.C),t=m}}e.clers[e.clers.length-1]=s.F}_onCompressFace(t,e,r){this.onCompressFace&&this.onCompressFace(t,e,r)}getNewVertexIdByCornerId(t,e){const r=this.visitedVertexMap,n=this.duplicateVertexCornerMap;return void 0===e&&(e=this.indices[t]),n[t]?n[t]-1:r[e]?r[e]-1:this.currentVertex+1}getOriginVertexId(t){const e=this.nonManifoldMap;return void 0!==e[t]?e[t]:t}writeVertex(t,e=-1){const r=this.ct,i=this.indices;this.nonManifoldMap;var o=i[t];const s=this.getNewVertexIdByCornerId(t,o);if(o=this.getOriginVertexId(o),this.writedVertexMap[s])return s;if(this.writedVertexMap[s]=1,this.noParallelogramPrediction)return this.geometry.cal(this.outputGeometry,s,n.cp,o),s;if(-1===e)void 0===this.lastWriteVertexIndex?this.geometry.cal(this.outputGeometry,s,n.cp,o):this.geometry.cal(this.outputGeometry,s,n.minus,o,this.lastWriteVertexIndex);else{var c=this.getOriginVertexId(i[e]),a=this.getOriginVertexId(i[r.prevCorner(e)]),u=this.getOriginVertexId(i[r.nextCorner(e)]);this.geometry.cal(this.outputGeometry,s,n.pp,c,a,u,o)}return this.lastWriteVertexIndex=o,s}handlerDuplicateVertexInOneLoop(t,e){const r=this.ct,n=this.duplicateVertexCornerMap;var i=t;do{n[i]=e,i=r.prevNeighborCorner(i)}while(i!==t&&i>=0);i=t;do{n[i]=e,i=r.nextNeighborCorner(i)}while(i!==t&&i>=0)}compress(){const t=this.ct;this.writedVertexMap=[];const e=this.visitedVertexMap,r=this.indices,n=r.length;var i=this.geometry.cloneStruct();delete i.indices,i.noParallelogramPrediction=this.noParallelogramPrediction,i.clers=[],i.holes=[],i.handles=[],this.currentFace=-1,this.currentVertex=-1,this.outputGeometry=i;const o=this.boundaryLoops;if(o.length)for(var s=0;s<o.length;s++){var c=o[s];if(!this.visitedFaceMap[t.cornerToFace(c[0])]){this.duplicateVertexCornerMap={},this.accessedMap={};for(var a=0;a<c.length;a++){var u=r[c[a]];this.currentVertex++,this.accessedMap[u]?this.handlerDuplicateVertexInOneLoop(c[a],this.currentVertex+1):(this.accessedMap[u]=1,e[u]=this.currentVertex+1)}this.compressFromCorner(t.nextCorner(c[0]),i),delete this.lastWriteVertexIndex}}this.duplicateVertexCornerMap={};for(s=0;s<n;s+=3)this.compressFromCorner(s,i),delete this.lastWriteVertexIndex;return i.mode="CLERS",i}}},function(t,e){t.exports=class{constructor(t,e={}){t&&(this.indices=t,this.onFaceDelete=e.onFaceDelete,this.create())}isFaceCanDelete(t){const e=this.indices,r=e[t],n=e[t+1],i=e[t+2];return r===n||r===i||n===i}markEdge(t,e,r,n,i){var o=t+"-"+e,s=e+"-"+t;if(s in n){if(-1!==i[n[s]])return;i[n[s]]=r,i[r]=n[s]}else n[o]=r}create(){const t=this.indices,e=t.length,r=this.cornerTable=new Array(e);r.fill(-1);const n={};for(var i=0;i<e;i+=3)this.isFaceCanDelete(i)?this.onFaceDelete&&this.onFaceDelete(i/3):(this.markEdge(t[i],t[i+1],i+2,n,r),this.markEdge(t[i+1],t[i+2],i,n,r),this.markEdge(t[i+2],t[i],i+1,n,r));return r}oppositeCorner(t){return this.cornerTable[t]}nextCorner(t){return t<0?-1:t+(t%3==2?-2:1)}prevCorner(t){return t<0?-1:t+(t%3?-1:2)}rightCorner(t){return this.oppositeCorner(this.nextCorner(t))}leftCorner(t){return this.oppositeCorner(this.prevCorner(t))}nextNeighborCorner(t){return this.nextCorner(this.rightCorner(t))}prevNeighborCorner(t){return this.prevCorner(this.leftCorner(t))}rightmostCorner(t){this.indices;for(var e=this.rightCorner(t),r=-1;-1!==e&&r!==t;)r=this.nextCorner(e),e=this.rightCorner(r);return r}leftmostCorner(t){this.indices;for(var e=this.leftCorner(t),r=-1;-1!==e&&r!==t;)r=this.prevCorner(e),e=this.rightCorner(e);return-1===r?t:r}cornerToFace(t){return Math.floor(t/3)}rightFace(t){return this.cornerToFace(this.rightCorner(t))}leftFace(t){return this.cornerToFace(this.leftCorner(t))}isCornerCanReach(t,e){var r=t;do{if((r=this.nextNeighborCorner(r))===e)return!0}while(r>=0&&r!==t);r=t;do{if((r=this.prevNeighborCorner(r))===e)return!0}while(r>=0&&r!==t);return!1}}},function(t,e,r){const n=r(88).RBTree;t.exports=function(t){const e=function(t){return function(e,r){for(var n=0,i=0;i<t.attrs.length;i++){var o=t.attrs[i];if("TANGENT"!==o.name)for(var s=e*o.itemCount,c=r*o.itemCount,a=0;a<o.itemCount;a++)if(n=o.data[s+a]-o.data[c+a])return n}return n}}(t),r=new n(e),i=t.getAttrLength(),o={};for(var s=0;s<i;s++){var c=r.find(s);null==c?r.insert(s):o[s]=c}const a=t.indices;for(s=a.length-1;s>=0;s--)a[s]in o&&(a[s]=o[a[s]])}},function(t,e,r){t.exports={RBTree:r(89),BinTree:r(90)}},function(t,e,r){var n=r(29);function i(t){this.data=t,this.left=null,this.right=null,this.red=!0}function o(t){this._root=null,this._comparator=t,this.size=0}function s(t){return null!==t&&t.red}function c(t,e){var r=t.get_child(!e);return t.set_child(!e,r.get_child(e)),r.set_child(e,t),t.red=!0,r.red=!1,r}function a(t,e){return t.set_child(!e,c(t.get_child(!e),!e)),c(t,e)}i.prototype.get_child=function(t){return t?this.right:this.left},i.prototype.set_child=function(t,e){t?this.right=e:this.left=e},o.prototype=new n,o.prototype.insert=function(t){var e=!1;if(null===this._root)this._root=new i(t),e=!0,this.size++;else{var r=new i(void 0),n=0,o=0,u=null,f=r,l=null,h=this._root;for(f.right=this._root;;){if(null===h?(h=new i(t),l.set_child(n,h),e=!0,this.size++):s(h.left)&&s(h.right)&&(h.red=!0,h.left.red=!1,h.right.red=!1),s(h)&&s(l)){var d=f.right===u;h===l.get_child(o)?f.set_child(d,c(u,!o)):f.set_child(d,a(u,!o))}var p=this._comparator(h.data,t);if(0===p)break;o=n,n=p<0,null!==u&&(f=u),u=l,l=h,h=h.get_child(n)}this._root=r.right}return this._root.red=!1,e},o.prototype.remove=function(t){if(null===this._root)return!1;var e=new i(void 0),r=e;r.right=this._root;for(var n=null,o=null,u=null,f=1;null!==r.get_child(f);){var l=f;o=n,n=r,r=r.get_child(f);var h=this._comparator(t,r.data);if(f=h>0,0===h&&(u=r),!s(r)&&!s(r.get_child(f)))if(s(r.get_child(!f))){var d=c(r,f);n.set_child(l,d),n=d}else if(!s(r.get_child(!f))){var p=n.get_child(!l);if(null!==p)if(s(p.get_child(!l))||s(p.get_child(l))){var y=o.right===n;s(p.get_child(l))?o.set_child(y,a(n,l)):s(p.get_child(!l))&&o.set_child(y,c(n,l));var m=o.get_child(y);m.red=!0,r.red=!0,m.left.red=!1,m.right.red=!1}else n.red=!1,p.red=!0,r.red=!0}}return null!==u&&(u.data=r.data,n.set_child(n.right===r,r.get_child(null===r.left)),this.size--),this._root=e.right,null!==this._root&&(this._root.red=!1),null!==u},t.exports=o},function(t,e,r){var n=r(29);function i(t){this.data=t,this.left=null,this.right=null}function o(t){this._root=null,this._comparator=t,this.size=0}i.prototype.get_child=function(t){return t?this.right:this.left},i.prototype.set_child=function(t,e){t?this.right=e:this.left=e},o.prototype=new n,o.prototype.insert=function(t){if(null===this._root)return this._root=new i(t),this.size++,!0;for(var e=0,r=null,n=this._root;;){if(null===n)return n=new i(t),r.set_child(e,n),ret=!0,this.size++,!0;if(0===this._comparator(n.data,t))return!1;e=this._comparator(n.data,t)<0,r=n,n=n.get_child(e)}},o.prototype.remove=function(t){if(null===this._root)return!1;var e=new i(void 0),r=e;r.right=this._root;for(var n=null,o=null,s=1;null!==r.get_child(s);){n=r,r=r.get_child(s);var c=this._comparator(t,r.data);s=c>0,0===c&&(o=r)}return null!==o&&(o.data=r.data,n.set_child(n.right===r,r.get_child(null===r.left)),this._root=e.right,this.size--,!0)},t.exports=o},function(t,e,r){const n=r(13).SmartBuffer,i=r(6);r(14);t.exports={write:function(t,e=new n){if(function(t,e){e.writeUInt8(1),e.writeUInt32LE(t.clers.length),e.writeUInt32LE(t.getAttrLength()),e.writeUInt8(t.attrs.length),e.writeUInt8(t.noParallelogramPrediction?1:0),e.writeUInt16LE(t.holes.length),e.writeUInt16LE(t.handles.length/2)}(t,e),t.holes.forEach(t=>{e.writeUInt16LE(t)}),t.handles.length)for(var r=0;r<t.handles.length;r+=2)e.writeUInt32LE(t.handles[r]),e.writeUInt32LE(t.handles[r+1]);t.clers.forEach(t=>{e.writeUInt8(t)}),t.attrs.forEach(t=>{const r=t.name?i.ATTR_NAME_ID[t.name]:7;e.writeUInt16LE(r),e.writeUInt8(t.itemCount),e.writeUInt8(t.quantizationBit||0),e.writeFloatLE(t.min||0),e.writeFloatLE(t.max||0);for(var n=t.data,o=n.length,s=0;s<o;s++)e.writeInt16LE(n[s]||0)})}}},function(t,e,r){const n=r(6),i=r(93),o=r(94),s=r(95),c=r(96),a=[i],u=[o];function f(t,e=0){return t instanceof Uint8Array&&(e=t.byteOffset,t=t.buffer),function(t){return new a[t.type](t).decompress()}(function(t,e){const r=new Uint8Array(t,e,4);if(65!==r[0]||77!==r[1]||67!==r[2])throw new Error("The file is not AMC format!");const n=u[r[3]].read(t,e+4);return n.geometry.type=r[3],n.geometry}(t,e))}var l,h=null,d=null;function p(t,e){return!h&&c()?(h=new s({wasmURL:t,memPages:e}),d=h.init()):d||Promise.resolve()}function y(t,e,r){if(h||p(e,r),!h||!h.isReady)return f(t);try{return h.decompress(t)}catch(e){return console.warn("wasm decompress error",e),f(t)}}var m=null;function b(t){return t=t||"https://g.alicdn.com/hilo/amc/0.1.25/worker.js",m||(!1===l||"undefined"==typeof Worker?Promise.reject("dont support web worker"):m=new Promise((e,r)=>{var n=new XMLHttpRequest;n.addEventListener("load",function(){if("undefined"==typeof URL||"undefined"==typeof Blob)l=new Worker(`data:application/javascript, ${this.responseText}`);else{const t=URL.createObjectURL(new Blob([this.responseText]));l=new Worker(t)}l.onerror=t=>{console.log("web worker error",t),l=!1,r(t)},e(l)}),n.addEventListener("error",t=>r(t)),n.open("get",t,!0),n.send()}))}var g=0;function w(t,e,r,i){return e=e&&c(),t=new Uint8Array(t),b(i).then(i=>new Promise((o,s)=>{const c=g++;var a=e=>{if(e.data.id===c)if(i.removeEventListener("message",a),a=null,e.data.data){const t=e.data.data;t.constructor=n,t.__proto__=n.prototype,o(t)}else o(f(t))};i.addEventListener("message",a),i.postMessage({id:c,data:t,useWASM:e,wasmURL:r},[t.buffer])})).catch(n=>e?y(t,r):f(t))}t.exports={initWASM:p,initWorker:b,decompress:function(t,e,r){const n=c();return!n||t.byteLength>1048576?w(t,n,e,r):n?Promise.resolve(y(t,e)):Promise.resolve(f(t))},decompressWithJS:f,decompressWithWASM:y,decompressWithWorker:w}},function(t,e,r){const n=r(6),i=(r(28),r(14)),o=i.map;t.exports=class{constructor(t){this.geometry=t,this.faceCount=t.clers.length,this.clers=t.clers,this.holes=t.holes,this.handles=t.handles,this.createHandleMap(this.handles),this.vertexCount=t.getAttrLength(),this.noParallelogramPrediction=!!t.noParallelogramPrediction}nextCorner(t){return t<0?-1:t+(t%3==2?-2:1)}prevCorner(t){return t<0?-1:t+(t%3?-1:2)}createHandleMap(t){const e=this.handlesMap={};if(t)for(var r=t.length-1;r>=0;r-=2)e[t[r]]=t[r-1]}mapBoundary(t){const e=this.indices,r=t.length;for(var n=this.currentVertex,i=this.currentVertex-r+1,o=r-1;o>=0;o--)e[this.nextCorner(t[o])]=n,n=i,e[this.prevCorner(t[o])]=i++;this.currentVertex-=r}mapHoleBoundary(t){const e=this.indices,r=t.length;for(var n=this.currentVertex-r+1,i=n,o=r-1;o>=0;o--)e[this.nextCorner(t[o])]=n++,e[this.prevCorner(t[o])]=o?n:i;this.currentVertex-=r}fixNegativeIndex(t){const e=t,r=this.indices;for(;r[t]<0;){if(e===-r[-r[t]]||r[t]===r[-r[t]]){console.warn("dead loop bug!!"),r[s]=0;break}r[t]=r[-r[t]]}}fixIndicesAndReadVertice(){const t=this.indices,e=this.handlesMap,r=this.clers,n=r.length;var o,s=-1;const c=[];for(var a=0,u=0;a<n;a++,u+=3)-1===s?(this.fixNegativeIndex(u+1),this.fixNegativeIndex(u+2)):(t[u+1]=t[this.prevCorner(s)],t[u+2]=t[this.nextCorner(s)]),this.fixNegativeIndex(u),-1===s?(this.readVertex(t[u+2]),this.readVertex(t[u+1]),this.readVertex(t[u])):this.readVertex(t[u],s),s=u+1,(o=r[a])!==i.S||e[a]?o===i.E||o===i.F?s=c.pop():o===i.R&&(s=u+2):c.push(u+2),o===i.F&&(s=-1,delete this.lastReadVertexIndex),this._onDecompressFace(a,o)}readVertex(t,e=-1){if(this.readedVertexMap[t])return;if(this.readedVertexMap[t]=1,this.noParallelogramPrediction)return;const r=this.indices,i=this.geometry;-1===e?void 0!==this.lastReadVertexIndex&&i.cal(i,t,n.plus,this.lastReadVertexIndex,t):i.cal(i,t,n.depp,r[e],r[this.prevCorner(e)],r[this.nextCorner(e)],t),this.lastReadVertexIndex=t}markCorner(t,e){const r=this.indices;void 0===r[this.nextCorner(t)]&&(r[this.nextCorner(t)]=-this.prevCorner(e[0])),void 0===r[this.prevCorner(t)]&&(r[this.prevCorner(t)]=-this.nextCorner(e[e.length-1]))}onFaceC(t){const e=this.indices,r=3*this.currentFace,n=this.currentVertex--;e[r]=n;var i=t.pop();return e[this.nextCorner(i)]=n,e[this.prevCorner(i)]=-this.nextCorner(t[t.length-1]),i=t.shift(),e[this.prevCorner(i)]=n,e[this.nextCorner(i)]=-this.prevCorner(t[0]),t.push(r),t}onFaceL(t){const e=3*this.currentFace;return this.markCorner(t.pop(),t),t.unshift(e+2),t.push(e),t}onFaceF(t,e){return t&&this.mapBoundary(t),this.onFaceE(null,e)}onFaceE(t,e){const r=3*this.currentFace;return t&&e.push(t),[r+2,r+1,r]}onFaceR(t){const e=3*this.currentFace;return this.markCorner(t.pop(),t),t.push(e+1,e),t}onHandleEnd(t,e,r){const n=this.indices,i=3*this.currentFace,o=this.handlesMap[this.currentFace],s=e.splice(0,t);return e.shift(),r.push(s),n[this.nextCorner(o)]=-(i+1),n[this.prevCorner(o)]=-this.nextCorner(s[s.length-1]),n[i]=-this.prevCorner(s[0]),e.push(i),e}onHandleStart(t,e){const r=this.indices,n=3*this.currentFace,i=this.handlesMap[this.currentFace];for(var o,s=e.length-1;s>=0;s--){var c=e[s].indexOf(i);if(c>=0){var a=(o=e.splice(s,1)[0]).splice(0,c);o.shift(),o.push(...a);break}}return r[this.nextCorner(i)]=-(n+1),r[this.prevCorner(i)]=-this.nextCorner(o[o.length-1]),r[n]=-this.prevCorner(t[0]),(t=o.concat(t)).push(n),t}onFaceS(t,e,r){const n=this.handlesMap,i=this.indices,o=3*this.currentFace;if(n[this.currentFace]){this.markCorner(t.pop(),t);const e=t.indexOf(n[this.currentFace]);t=e>=0?this.onHandleEnd(e,t,r):this.onHandleStart(t,r)}else{const r=t.pop();this.markCorner(r,t),i[o]=-this.nextCorner(r);const n=e.pop();this.markCorner(n.pop(),n),(t=n.concat(t)).push(o)}return t}onFaceM(t,e,r){const n=this.indices,i=3*this.currentFace,o=t.splice(0,this.holes[this.currentHole--]);this.mapHoleBoundary(o);const s=n[this.prevCorner(o[0])];n[i]=s;var c=t.pop();return n[this.prevCorner(c)]=-this.nextCorner(t[t.length-1]),n[this.nextCorner(c)]=s,c=t.shift(),n[this.prevCorner(c)]=s,n[this.nextCorner(c)]=-this.prevCorner(t[0]),t.push(i),t}decompress(){this.readedVertexMap=new Uint8Array(this.vertexCount);const t=this.faceCount,e=this.indices=new Array(3*t);this.currentFace=t-1,this.currentVertex=this.vertexCount-1,this.currentHole=this.holes.length-1;const r=this.clers,n=[],i=[];for(var s;this.currentFace>=0;){var c="onFace"+o[r[this.currentFace]];this[c]?s=this[c](s,n,i):console.warn(`has no ${c}`),this.currentFace--}return this.mapBoundary(s),this.fixIndicesAndReadVertice(this.indices),this.geometry.indices=e,this.geometry.dequantize(),this.geometry}_onDecompressFace(t,e){this.onDecompressFace&&this.onDecompressFace(t,e)}}},function(t,e,r){const n=r(6);function i(t,e,r,n){return new t(e.slice(r,r+n*t.BYTES_PER_ELEMENT))}t.exports={read:function(t,e=0){const r=new DataView(t),o=new n;var s=function(t,e){const r={};return r.version=t.getUint8(e++),r.faceCount=t.getUint32(e,!0),e+=4,r.vertexCount=t.getUint32(e,!0),e+=4,r.attrCount=t.getUint8(e++),r.noParallelogramPrediction=t.getUint8(e++),r.holesCount=t.getUint16(e,!0),e+=2,r.handlesCount=t.getUint16(e,!0),e+=2,r.headerBytes=15,r}(r,e);return e+=s.headerBytes,o.mode="CLERS",e=function(t,e,r,n){return n.holesCount?(t.holes=i(Uint16Array,e.buffer,r,n.holesCount),r+2*n.holesCount):(t.holes=[],r)}(o,r,e,s),e=function(t,e,r,n){return n.handlesCount?(t.handles=i(Uint32Array,e.buffer,r,2*n.handlesCount),r+8*n.handlesCount):(t.handles=[],r)}(o,r,e,s),e=function(t,e,r,n){return t.clers=new Uint8Array(e.buffer,r,n.faceCount),r+n.faceCount}(o,r,e,s),e=function(t,e,r,n){for(var o=0;o<n.attrCount;o++){let o={},s=e.getUint16(r,!0);r+=2,o.name=t.attrIdToName(s),o.itemCount=e.getUint8(r++),o.quantizationBit=e.getUint8(r++),o.min=e.getFloat32(r,!0),r+=4,o.max=e.getFloat32(r,!0),r+=4,o.data=i(Int16Array,e.buffer,r,o.itemCount*n.vertexCount),r+=o.itemCount*n.vertexCount*2,t.attrs.push(o)}return r}(o,r,e,s),{header:s,geometry:o,offset:e}}}},function(t,e,r){const n=r(6);t.exports=class{constructor(t={}){this.wasmURL=t.wasmURL||"https://ossgw.alicdn.com/tmall-c3/tmx/70b8d82ccf33e97a124e54c2d6a3e0c7.wasm",this.memPages=t.memPages||256,this.memPages<256&&(this.memPages=256),this.isReady=!1}initASMJS(){this.isReady=!0,this.dv=new DataView(HEAP8.buffer),this.heap8=HEAP8,this.ins={exports:{__Z7AMCinitj:Module.__Z7AMCinitj,__Z12AMDecompressv:Module.__Z12AMDecompressv}}}init(){const t=this.memory=new WebAssembly.Memory({initial:this.memPages});this.dv=new DataView(t.buffer);const e=this.heap8=new Uint8Array(t.buffer),r={global:{NaN:5,Infinity:6},env:{memoryBase:0,memory:t,_malloc:function(){return 2097152},_memset:function(t,r,n){return e.fill(r,t,t+n),t},_printf:function(t,r){for(var n=t;e[n];)n++;var i=String.fromCharCode(...e.slice(t,n)),o=0;i=i.replace(/%([duf])/g,function(t,e){return"d"===e||"u"===e?dv.getInt32(r+4*o++,!0):"f"===e?dv.getFloat32(r+4*o++,!0):void 0}),console.log(i)}}};return fetch(this.wasmURL).then(t=>t.arrayBuffer()).then(t=>WebAssembly.instantiate(t,r)).then(t=>{this.module=t,this.ins=t.instance,this.isReady=!0}).catch(t=>console.log("wasm load error, use js ver"))}getDataAddr(t){return this.ins.exports.__Z7AMCinitj(t)}decompress(t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));const e=this.dv,r=this.heap8,i=this.getDataAddr(t.length);r.set(t,i);const o=this.ins.exports.__Z12AMDecompressv();if(o<=0)throw console.error("decompression error code: "+o),new Error("decompression error code: "+o);const s=e.getUint32(o,!0),c=e.getUint32(o+4,!0),a=e.getUint32(o+8,!0),u=e.getUint32(o+12,!0),f=[];for(var l=0;l<u;l++){var h=o+16+12*l;f.push([e.getUint32(h,!0),e.getUint32(h+4,!0),e.getUint32(h+8,!0)])}var d=new Uint32Array(e.buffer,c,3*s);d=a>65536?new Uint32Array(d):new Uint16Array(d);var p=new n(d);return f.forEach(t=>{const[r,n,i]=t,o=new Float32Array(e.buffer.slice(i,i+a*n*4));p.addAttr(p.attrIdToName(r),o,n)}),p}}},function(t,e){function r(){if("undefined"==typeof WebAssembly||"undefined"==typeof fetch||function(){if(!/iPad|iPhone|iPod/i.test(navigator.userAgent))return!1;if(/OS (\d+)_(\d+)_?(\d+)?/i.test(navigator.userAgent)){const t=Number(RegExp.$1),e=Number(RegExp.$2);if(11===t&&e>=3||t>11)return!1}return!0}())return!1;try{const t=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),e=new WebAssembly.Module(t);return 0!==new WebAssembly.Instance(e,{}).exports.test(4)}catch(t){return console.log("err while check WebAssembly",t),!1}}var n;t.exports=function(){return void 0===n&&(n=r()),n}}]);